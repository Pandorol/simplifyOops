{"version":3,"sources":["file:///G:/sxbs2/sxbs2/assets/work/common/prompt/TipsManager.ts"],"names":["TipsManager","tween","Vec3","oops","UIID","test","callback","operate","title","content","okWord","cancelWord","okFunc","console","log","cancelFunc","needCancel","gui","open","Confirm","getPopCommonEffect","alert","cb","tips","confirm","callbacks","newCallbacks","onAdded","node","params","setScale","to","scale","start","onBeforeRemove","next","call","target","data"],"mappings":"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","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2021-07-03 16:13:17\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2022-08-05 10:13:47\r\n */\r\n\r\nimport { Node, tween, Vec3 } from \"cc\";\r\nimport { UICallbacks } from \"db://assets/core/gui/layer/Defines\";\r\nimport { oops } from \"db://assets/core/Oops\";\r\nimport { UIID } from \"../../ui/UIConfig\";\r\n\r\n\r\n/** 提示窗口管理 */\r\nclass TipsManager {\r\n    test(callback?: Function) {\r\n        let operate: any = {\r\n            title: 'common_prompt_title_sys',\r\n            content: \"common_prompt_content\",\r\n            okWord: 'common_prompt_ok',\r\n            cancelWord: 'common_prompt_cancal',\r\n            okFunc: () => {\r\n                console.log(\"okFunc\");\r\n            },\r\n            cancelFunc: () => {\r\n                console.log(\"cancelFunc\");\r\n            },\r\n            needCancel: true\r\n        };\r\n        oops.gui.open(UIID.Confirm, operate, this.getPopCommonEffect());\r\n    }\r\n\r\n    alert(content: string, cb?: Function, title?: string, okWord?: string) {\r\n        let operate: any = {\r\n            title: title ? title : 'common_prompt_title_sys',\r\n            content: content,\r\n            okWord: okWord ? okWord : 'common_prompt_ok',\r\n            okFunc: () => {\r\n                cb && cb();\r\n            },\r\n            needCancel: false\r\n        };\r\n        oops.gui.open(UIID.Confirm, operate, tips.getPopCommonEffect());\r\n    }\r\n\r\n    confirm(content: string, cb: Function, okWord: string = \"common_prompt_ok\") {\r\n        let operate: any = {\r\n            title: 'common_prompt_title_sys',\r\n            content: content,\r\n            okWord: okWord,\r\n            cancelWord: 'common_prompt_cancal',\r\n            okFunc: () => {\r\n                cb && cb()\r\n            },\r\n            cancelFunc: () => {\r\n\r\n            },\r\n            needCancel: true\r\n        };\r\n        oops.gui.open(UIID.Confirm, operate, tips.getPopCommonEffect());\r\n    }\r\n\r\n    /** 弹窗动画 */\r\n    private getPopCommonEffect(callbacks?: UICallbacks) {\r\n        let newCallbacks: UICallbacks = {\r\n            // 节点添加动画\r\n            onAdded: (node, params) => {\r\n                node.setScale(0.1, 0.1, 0.1);\r\n\r\n                tween(node)\r\n                    .to(0.2, { scale: new Vec3(1, 1, 1) })\r\n                    .start();\r\n            },\r\n            // 节点删除动画\r\n            onBeforeRemove: (node, next) => {\r\n                tween(node)\r\n                    .to(0.2, { scale: new Vec3(0.1, 0.1, 0.1) })\r\n                    .call((target, data) => {\r\n                        next();\r\n                    })\r\n                    .start();\r\n            },\r\n        }\r\n\r\n        if (callbacks) {\r\n            if (callbacks && callbacks.onAdded) {\r\n                let onAdded = callbacks.onAdded;\r\n                // @ts-ignore\r\n                callbacks.onAdded = (node: Node, params: any) => {\r\n                    onAdded(node, params);\r\n\r\n                    // @ts-ignore\r\n                    newCallbacks.onAdded(node, params);\r\n                };\r\n            }\r\n\r\n            if (callbacks && callbacks.onBeforeRemove) {\r\n                let onBeforeRemove = callbacks.onBeforeRemove;\r\n                callbacks.onBeforeRemove = (node, params) => {\r\n                    onBeforeRemove(node, params);\r\n\r\n                    // @ts-ignore\r\n                    newCallbacks.onBeforeRemove(node, params);\r\n                };\r\n            }\r\n            return callbacks;\r\n        }\r\n        return newCallbacks;\r\n    }\r\n}\r\n\r\nexport var tips = new TipsManager();"]}