{"version":3,"sources":["file:///G:/sxbs2/sxbs2/assets/work/Main.ts"],"names":["DynamicAtlasManager","_decorator","macro","profiler","DEBUG","JSB","oops","Root","ecs","smc","Initialize","UIConfigData","ccclass","property","CLEANUP_IMAGE_CACHE","instance","enabled","maxFrameSize","Main","start","showStats","run","initialize","getEntity","gui","toast","initGui","init","initEcsSystem"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMSA,MAAAA,mB,OAAAA,mB;AAAqBC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,Q,OAAAA,Q;;AACxCC,MAAAA,K,UAAAA,K;AAAOC,MAAAA,G,UAAAA,G;;AAGPC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;AAfT;AACA;AACA;AACA;AACA;AACA;;;;;OAaM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;AAE9BC,MAAAA,KAAK,CAACY,mBAAN,GAA4B,KAA5B;AACAd,MAAAA,mBAAmB,CAACe,QAApB,CAA6BC,OAA7B,GAAuC,IAAvC;AACAhB,MAAAA,mBAAmB,CAACe,QAApB,CAA6BE,YAA7B,GAA4C,GAA5C;;sBAGaC,I,WADZN,OAAO,CAAC,MAAD,C,gBAAR,MACaM,IADb;AAAA;AAAA,wBAC+B;AAC3BC,QAAAA,KAAK,GAAG;AACJ,cAAIf,KAAJ,EAAWD,QAAQ,CAACiB,SAAT;AACd;;AAESC,QAAAA,GAAG,GAAG;AACZ;AAAA;AAAA,0BAAIC,UAAJ,GAAiB;AAAA;AAAA,0BAAIC,SAAJ;AAAA;AAAA,uCAAjB;;AACA,cAAIlB,GAAJ,EAAS;AACL;AAAA;AAAA,8BAAKmB,GAAL,CAASC,KAAT,CAAe,YAAf;AACH;AACJ;;AAESC,QAAAA,OAAO,GAAG;AAChB;AAAA;AAAA,4BAAKF,GAAL,CAASG,IAAT;AAAA;AAAA;AACH;;AAEeC,QAAAA,aAAa,GAAG,CAC5B;AACA;AACA;AACA;;AAJ4B;AAK/B;;AArB0B,O","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2021-07-03 16:13:17\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2023-01-19 15:28:28\r\n */\r\nimport { DynamicAtlasManager, _decorator, macro, profiler } from 'cc';\r\nimport { DEBUG, JSB } from 'cc/env';\r\n\r\n\r\nimport { oops } from '../core/Oops';\r\nimport { Root } from '../core/Root';\r\nimport { ecs } from '../libs/ecs/ECS';\r\nimport { smc } from './common/ecs/SingletonModuleComp';\r\nimport { Initialize } from './initialize/Initialize';\r\nimport { UIConfigData } from './ui/UIConfig';\r\n\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\nmacro.CLEANUP_IMAGE_CACHE = false;\r\nDynamicAtlasManager.instance.enabled = true;\r\nDynamicAtlasManager.instance.maxFrameSize = 512;\r\n\r\n@ccclass('Main')\r\nexport class Main extends Root {\r\n    start() {\r\n        if (DEBUG) profiler.showStats();\r\n    }\r\n\r\n    protected run() {\r\n        smc.initialize = ecs.getEntity<Initialize>(Initialize);\r\n        if (JSB) {\r\n            oops.gui.toast(\"热更新后新程序的提示\");\r\n        }\r\n    }\r\n\r\n    protected initGui() {\r\n        oops.gui.init(UIConfigData);\r\n    }\r\n\r\n    protected async initEcsSystem() {\r\n        // oops.ecs.add(new EcsPositionSystem())\r\n        // oops.ecs.add(new EcsAccountSystem());\r\n        // oops.ecs.add(new EcsRoleSystem());\r\n        // oops.ecs.add(new EcsInitializeSystem());\r\n    }\r\n}"]}