System.register("chunks:///_virtual/AsyncQueue.ts",["cc"],(function(s){var e,i,n;return{setters:[function(s){e=s.cclegacy,i=s.warn,n=s.log}],execute:function(){e._RF.push({},"8c48bBN521JzIxhITJunFji","AsyncQueue",void 0);class t{constructor(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}get queues(){return this._queues}get enable(){return this._enable}set enable(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}push(s,e=null){let i=t._$uuid_count++;return this._queues.push({uuid:i,callbacks:[s],params:e}),i}pushMulti(s,...e){let i=t._$uuid_count++;return this._queues.push({uuid:i,callbacks:e,params:s}),i}remove(s){if(this._runningAsyncTask?.uuid!==s){for(let e=0;e<this._queues.length;e++)if(this._queues[e].uuid===s){this._queues.splice(e,1);break}}else i("正在执行的任务不可以移除")}get size(){return this._queues.length}get isProcessing(){return this._isProcessingTaskUUID>0}get isStop(){return!(this._queues.length>0)&&!this.isProcessing}get runningParams(){return this._runningAsyncTask?this._runningAsyncTask.params:null}clear(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null}step(){this.isProcessing&&this.next(this._isProcessingTaskUUID)}play(s=null){if(this.isProcessing)return;if(!this._enable)return;let e=this._queues.shift();if(e){this._runningAsyncTask=e;let i=e.uuid;this._isProcessingTaskUUID=i;let n=e.callbacks;if(1==n.length){let t=(s=null)=>{this.next(i,s)};n[0](t,e.params,s)}else{let t=n.length,u=[],l=(s=null)=>{--t,u.push(s||null),0===t&&this.next(i,u)},r=t;for(let i=0;i<r;i++)n[i](l,e.params,s)}}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}yieldTime(s,e=null){this.push((function(i,n,t){let u=setTimeout((()=>{clearTimeout(u),e&&e(),i(t)}),s)}),{des:"AsyncQueue.yieldTime"})}next(s,e=null){this._isProcessingTaskUUID===s?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(e)):this._runningAsyncTask&&n(this._runningAsyncTask)}static excuteTimes(s,e=null){let i=s;return()=>{--i,0===i&&e&&e()}}}s("AsyncQueue",t),t._$uuid_count=1,e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["cc"],(function(t){var e,o,s;return{setters:[function(t){e=t.cclegacy,o=t.AudioSource,s=t._decorator}],execute:function(){var c;e._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);const{ccclass:n}=s;t("AudioEffect",n("AudioEffect")(c=class extends o{constructor(...t){super(...t),this.onComplete=null}start(){this.node.on(o.EventType.ENDED,this.onAudioEnded,this)}onAudioEnded(){this.onComplete&&this.onComplete()}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffectPool.ts",["cc","./Oops.ts","./ResLoader.ts","./AudioEffect.ts"],(function(e){var t,s,o,i,c,h,f;return{setters:[function(e){t=e.cclegacy,s=e.NodePool,o=e.AudioClip,i=e.Node},function(e){c=e.oops},function(e){h=e.resLoader},function(e){f=e.AudioEffect}],execute:function(){t._RF.push({},"01278BDjrtCr4CBpmO5DZlN","AudioEffectPool",void 0);e("AudioEffectPool",class{constructor(){this._switch=!0,this._volume=1,this.pool=new s,this.effects=new Map,this.res=new Map,this._aeId=0}get switch(){return this._switch}set switch(e){this._switch=e,e&&this.stop()}get volume(){return this._volume}set volume(e){this._volume=e,this.effects.forEach((t=>{t.volume=e}))}getAeId(){return 3e4==this._aeId&&(this._aeId=1),this._aeId++,this._aeId}async load(e,t=h.defaultBundleName,s){return new Promise((async(n,u)=>{if(!this.switch)return n(-1);let a,l,r,d=this.getAeId();a=e instanceof o?e.uuid:`${t}_${e}`,a+="_"+d,e instanceof o?l=e:(l=h.get(e,o,t),l||(this.res.set(t,e),l=await h.loadAsync(t,e,o)));let p=null;0==this.pool.size()?(p=new i,p.name="AudioEffect",p.parent=c.audio.node,r=p.addComponent(f)):(p=this.pool.get(),r=p.getComponent(f)),r.onComplete=()=>{this.put(d,e,t),s&&s()},this.effects.set(a,r),r.volume=this.volume,r.clip=l,r.play(),n(d)}))}put(e,t,s=h.defaultBundleName){let i;i=t instanceof o?t.uuid:`${s}_${t}`,i+="_"+e;let c=this.effects.get(i);c&&c.clip&&(this.effects.delete(i),c.stop(),this.pool.put(c.node))}release(){this.effects.forEach((e=>{e.node.destroy()})),this.effects.clear(),this.res.forEach(((e,t)=>{h.release(t,e)})),this.pool.clear()}stop(){this.effects.forEach((e=>{e.stop()}))}play(){this.switch&&this.effects.forEach((e=>{e.play()}))}pause(){this.switch&&this.effects.forEach((e=>{e.pause()}))}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./Oops.ts","./AudioEffectPool.ts","./AudioMusic.ts"],(function(t){var s,i,e,c,u;return{setters:[function(t){s=t.cclegacy,i=t.Component},function(t){e=t.oops},function(t){c=t.AudioEffectPool},function(t){u=t.AudioMusic}],execute:function(){s._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);const h="game_audio";t("AudioManager",class extends i{constructor(...t){super(...t),this.music=null,this.effect=new c,this.local_data={}}setMusicComplete(t=null){this.music.onComplete=t}playMusic(t,s,i){this.music.switch&&(this.music.loop=!1,this.music.load(t,s,i).then())}playMusicLoop(t,s){this.music.switch&&(this.music.loop=!0,this.music.load(t,null,s).then())}stopMusic(){this.music.switch&&this.music.playing&&this.music.stop()}get progressMusic(){return this.music.progress}set progressMusic(t){this.music.progress=t}get volumeMusic(){return this.music.volume}set volumeMusic(t){this.music.volume=t,this.save()}get switchMusic(){return this.music.switch}set switchMusic(t){this.music.switch=t,t||this.music.stop(),this.save()}playEffect(t,s,i){return this.effect.load(t,s,i)}putEffect(t,s,i){this.effect.put(t,s,i)}get volumeEffect(){return this.effect.volume}set volumeEffect(t){this.effect.volume=t,this.save()}get switchEffect(){return this.effect.switch}set switchEffect(t){this.effect.switch=t,t||this.effect.stop(),this.save()}resumeAll(){!this.music.playing&&this.music.progress>0&&this.music.play(),this.effect.play()}pauseAll(){this.music.playing&&this.music.pause(),this.effect.pause()}stopAll(){this.music.stop(),this.effect.stop()}save(){this.local_data.volume_music=this.music.volume,this.local_data.volume_effect=this.effect.volume,this.local_data.switch_music=this.music.switch,this.local_data.switch_effect=this.effect.switch,e.storage.set(h,this.local_data)}load(){if(this.music=this.getComponent(u)||this.addComponent(u),this.local_data=e.storage.getJson(h),this.local_data)try{this.setState()}catch{this.setStateDefault()}else this.setStateDefault()}setState(){this.music.volume=this.local_data.volume_music,this.effect.volume=this.local_data.volume_effect,this.music.switch=this.local_data.switch_music,this.effect.switch=this.local_data.switch_effect}setStateDefault(){this.local_data={},this.music.volume=1,this.effect.volume=1,this.music.switch=!0,this.effect.switch=!0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["cc","./ResLoader.ts"],(function(t){var s,i,e,n,o;return{setters:[function(t){s=t.cclegacy,i=t.AudioSource,e=t.AudioClip,n=t._decorator},function(t){o=t.resLoader}],execute:function(){var r;s._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);const{ccclass:u,menu:h}=n;t("AudioMusic",u("AudioMusic")(r=class extends i{constructor(...t){super(...t),this.switch=!0,this.onComplete=null,this._progress=0,this._isLoading=!1,this._nextBundleName=null,this._nextUrl=null}start(){this.node.on(i.EventType.ENDED,this.onAudioEnded,this)}onAudioEnded(){this.onComplete&&this.onComplete()}get progress(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress}set progress(t){this._progress=t,this.currentTime=t*this.duration}async load(t,s,i=o.defaultBundleName){if(this._isLoading)return this._nextBundleName=i,void(this._nextUrl=t);this._isLoading=!0;var n=await o.loadAsync(i,t,e);n&&(this._isLoading=!1,null!=this._nextUrl?(this.load(this._nextUrl,s,this._nextBundleName),this._nextBundleName=this._nextUrl=null):(s&&s(),this.playing&&this.stop(),this.release(),this.clip=n,this.play()))}release(){this.clip&&(this.stop(),this.clip.decRef(),this.clip=null)}})||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/BhvButtonGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,e,r,o,a,l,s,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){e=t.cclegacy,r=t.Enum,o=t.Button,a=t.SpriteFrame,l=t.EventHandler,s=t._decorator,u=t.Component,p=t.color}],execute:function(){var c,h,b,f,m,d,v,E,y,C,g,T,S,z,L,R,w,D,I,N,_,H,O,B,P,x,G,M,k,A,F;e._RF.push({},"41df676L55LvJ52uxkQpfxJ","BhvButtonGroup",void 0);const{ccclass:X,property:J,menu:U}=s;var j=function(t){return t[t.CHILDREN_INDEX=0]="CHILDREN_INDEX",t[t.CHILDREN_NAME=1]="CHILDREN_NAME",t}(j||{});t("BhvButtonGroup",(c=U("OopsFramework/UI/Button Group （按钮组控制）"),h=J({type:r(o.Transition)}),b=J({visible:function(){return this.transition===o.Transition.COLOR}}),f=J({visible:function(){return this.transition===o.Transition.COLOR}}),m=J({visible:function(){return this.transition===o.Transition.COLOR}}),d=J({visible:function(){return this.transition===o.Transition.COLOR}}),v=J({type:a,visible:function(){return this.transition===o.Transition.SPRITE}}),E=J({type:a,visible:function(){return this.transition===o.Transition.SPRITE}}),y=J({type:a,visible:function(){return this.transition===o.Transition.SPRITE}}),C=J({type:a,visible:function(){return this.transition===o.Transition.SPRITE}}),g=J({visible:function(){return this.transition===o.Transition.SCALE||this.transition===o.Transition.COLOR}}),T=J({visible:function(){return this.transition===o.Transition.SCALE}}),S=J({type:r(j)}),z=J({type:[l]}),L=J({tooltip:"规避3.x引擎BUG，EventHandler.component位为空导致找不到触发事件的脚本名的问题",readonly:!0}),X(R=c((D=i((w=class extends u{constructor(...t){super(...t),n(this,"transition",D,this),n(this,"hoverColor",I,this),n(this,"normalColor",N,this),n(this,"pressedColor",_,this),n(this,"disabledColor",H,this),n(this,"normalSprite",O,this),n(this,"pressedSprite",B,this),n(this,"hoverSprite",P,this),n(this,"disabledSprite",x,this),n(this,"duration",G,this),n(this,"zoomScale",M,this),n(this,"paramType",k,this),n(this,"touchEvents",A,this),n(this,"EventHandler_component",F,this)}onLoad(){this.node.children.forEach(((t,i)=>{let n=t.getComponent(o);null==n&&(n=t.addComponent(o)),this.touchEvents.forEach((e=>{let r=new l;r.component=""==e.component?this.EventHandler_component:e.component,r.handler=e.handler,r.target=e.target,this.paramType===j.CHILDREN_INDEX?r.customEventData=i.toString():r.customEventData=t.name,n.clickEvents.push(r)}))}))}}).prototype,"transition",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.Transition.NONE}}),I=i(w.prototype,"hoverColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p(255,255,255)}}),N=i(w.prototype,"normalColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p(214,214,214)}}),_=i(w.prototype,"pressedColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p(211,211,211)}}),H=i(w.prototype,"disabledColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p(124,124,124)}}),O=i(w.prototype,"normalSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(w.prototype,"pressedSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(w.prototype,"hoverSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(w.prototype,"disabledSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(w.prototype,"duration",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=i(w.prototype,"zoomScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),k=i(w.prototype,"paramType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.CHILDREN_INDEX}}),A=i(w.prototype,"touchEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(w.prototype,"EventHandler_component",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"VMModify"}}),R=w))||R)||R));e._RF.pop()}}}));

System.register("chunks:///_virtual/BhvFrameIndex.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,s,o,p,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,s=e.SpriteFrame,o=e.CCInteger,p=e._decorator,a=e.Component,l=e.error}],execute:function(){var u,d,c,m,h,x,F,f;i._RF.push({},"c238ewfJ2VJnZ8Gb8YQs5Ts","BhvFrameIndex",void 0);const{ccclass:y,property:g,executeInEditMode:b,requireComponent:I,menu:_}=p;e("BhvFrameIndex",(u=I(n),d=_("OopsFramework/UI/Frame Index （图片切换）"),c=g({type:[s],tooltip:"sprite将会用到帧图片"}),m=g({type:o,tooltip:"当前显示的帧图"}),y(h=b(h=u(h=d((F=t((x=class extends a{constructor(...e){super(...e),r(this,"spriteFrames",F,this),r(this,"_index",f,this)}get index(){return this._index}set index(e){if(e<0)return;this._index=e%this.spriteFrames.length,this.node.getComponent(n).spriteFrame=this.spriteFrames[this._index]}setName(e){let t=this.spriteFrames.findIndex((t=>t.name==e));t<0&&l("frameIndex 设置了不存在的name:",e),this.index=t||0}random(e,t){if(!this.spriteFrames)return;let r=this.spriteFrames.length;(null==e||e<0)&&(e=0),(null==t||t>r)&&(t=r),this.index=Math.floor(Math.random()*(t-e)+e)}next(){this.index++}previous(){this.index--}}).prototype,"spriteFrames",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),t(x.prototype,"index",[m],Object.getOwnPropertyDescriptor(x.prototype,"index"),x.prototype),f=t(x.prototype,"_index",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=x))||h)||h)||h)||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/BhvRollNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,l,a,o,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,l=t.Label,a=t.Enum,o=t._decorator,s=t.Component,u=t.lerp}],execute:function(){var n,h,p,c,b,g,m,E,f,y,d,T,v,M,S,R,V,w,F;r._RF.push({},"72d13dwmG9LS4gkJhSuAp3F","BhvRollNumber",void 0);const{ccclass:_,property:I,menu:N}=o;var C=function(t){return t[t.INTEGER=0]="INTEGER",t[t.FIXED_2=1]="FIXED_2",t[t.TIMER=2]="TIMER",t[t.PERCENTAGE=3]="PERCENTAGE",t[t.KMBT_FIXED2=4]="KMBT_FIXED2",t[t.CUSTOMER=5]="CUSTOMER",t}(C||{});t("BhvRollNumber",(n=N("OopsFramework/UI/Roll Number （滚动数字）"),h=I({type:l,tooltip:"需要滚动的 Label 组件,如果不进行设置，就会从自己的节点自动查找"}),p=I({tooltip:"当前的滚动值(开始的滚动值)"}),c=I({tooltip:"是否显示正负符号"}),b=I({tooltip:"滚动的目标值"}),g=I({tooltip:"滚动的线性差值",step:.01,max:1,min:0}),m=I({tooltip:"是否在开始时就播放"}),E=I({tooltip:"在滚动之前会等待几秒",step:.1,max:1,min:0}),f=I({type:a(C),tooltip:"是否在开始时就播放"}),_(y=n((T=e((d=class extends s{constructor(...t){super(...t),i(this,"label",T,this),i(this,"value",v,this),i(this,"showPlusSymbol",M,this),i(this,"_targetValue",S,this),i(this,"lerp",R,this),i(this,"playAtStart",V,this),i(this,"runWaitTimer",w,this),i(this,"valueType",F,this),this.onCustom=null,this.isScrolling=!1}get targetValue(){return this._targetValue}set targetValue(t){this._targetValue=t,this.scroll()}onLoad(){null==this.label&&(this.label=this.node.getComponent(l)),this.playAtStart&&(this.updateLabel(),this.scroll())}scroll(){this.isScrolling||(this.runWaitTimer>0?this.scheduleOnce((()=>{this.isScrolling=!0}),this.runWaitTimer):this.isScrolling=!0)}stop(){this.value=this.targetValue,this.isScrolling=!1,this.updateLabel()}init(t,e,i){this.targetValue=e||0,this.value=t||0,this.lerp=i||.1}scrollTo(t){null!=t&&(this.targetValue=t)}updateLabel(){let t=this.value,e="";switch(this.valueType){case C.INTEGER:e=Math.round(t)+"";break;case C.FIXED_2:e=t.toFixed(2);break;case C.TIMER:e=function(t=0,e=!0){let i=Math.floor(t),r=Math.floor(i/3600),l=Math.floor(i%3600/60),a=i%60,o=""+l,s=""+a;a<10&&(s="0"+a);return e?(l<10&&(o="0"+l),r+":"+o+":"+s):(o=""+(l+60*r),l<10&&(o="0"+l),o+":"+s)}(t);break;case C.PERCENTAGE:e=Math.round(100*t)+"%";break;case C.KMBT_FIXED2:e=t>=Number.MAX_VALUE?"MAX":t>1e12?(t/1e12).toFixed(2)+"T":t>1e9?(t/1e9).toFixed(2)+"B":t>1e6?(t/1e6).toFixed(2)+"M":t>1e3?(t/1e3).toFixed(2)+"K":Math.round(t).toString();break;case C.CUSTOMER:this.onCustom&&(e=this.onCustom(this.value,this.targetValue))}if(this.showPlusSymbol&&(t>0?e="+"+e:t<0&&(e="-"+e)),this.label){if(e===this.label.string)return;this.label.string=e}}update(t){if(0!=this.isScrolling)return this.value=u(this.value,this.targetValue,this.lerp),this.updateLabel(),Math.abs(this.value-this.targetValue)<=1e-4?(this.value=this.targetValue,void(this.isScrolling=!1)):void 0}}).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"value",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(d.prototype,"showPlusSymbol",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(d.prototype,"targetValue",[b],Object.getOwnPropertyDescriptor(d.prototype,"targetValue"),d.prototype),S=e(d.prototype,"_targetValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),R=e(d.prototype,"lerp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),V=e(d.prototype,"playAtStart",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=e(d.prototype,"runWaitTimer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=e(d.prototype,"valueType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.INTEGER}}),y=d))||y)||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/BhvSwitchPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var t,i,n,r,s,o,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.CCInteger,s=e._decorator,o=e.Component},function(e){h=e.VMEnv}],execute:function(){var a,d,c,p,u,g;n._RF.push({},"b3d083kncpDPqVztMtiq6DO","BhvSwitchPage",void 0);const{ccclass:l,property:x,executeInEditMode:P,menu:_}=s;e("BhvSwitchPage",(a=_("OopsFramework/UI/Switch Page （页面切换）"),d=x({type:r}),l(c=P(c=a((u=t((p=class extends o{constructor(...e){super(...e),i(this,"isLoopPage",u,this),i(this,"_index",g,this),this.preIndex=0,this._isChanging=!1}get index(){return this._index}set index(e){if(this.isChanging)return;e=Math.round(e);let t=this.node.children.length-1;this.isLoopPage?(e>t&&(e=0),e<0&&(e=t)):(e>t&&(e=t),e<0&&(e=0)),this.preIndex=this._index,this._index=e,h.editor?this._updateEditorPage(e):this._updatePage(e)}get isChanging(){return this._isChanging}onLoad(){this.preIndex=this.index}_updateEditorPage(e){if(!h.editor)return;let t=this.node.children;for(let i=0;i<t.length;i++){const n=t[i];n.active=i==e}}_updatePage(e){let t=this.node.children,i=this.preIndex,n=this.index;if(i===n)return;let r=t[i],s=t[n];r.active=!1,s.active=!0}next(){return!this.isChanging&&(this.index++,!0)}previous(){return!this.isChanging&&(this.index--,!0)}setEventIndex(e,t){return this.index>=0&&null!=this.index&&!1===this.isChanging&&(this.index=t,!0)}}).prototype,"isLoopPage",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=t(p.prototype,"_index",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(p.prototype,"index",[d],Object.getOwnPropertyDescriptor(p.prototype,"index"),p.prototype),c=p))||c)||c)||c));n._RF.pop()}}}));

System.register("chunks:///_virtual/CCVMParentComp.ts",["cc","./VMParent.ts"],(function(t){var e,c,o;return{setters:[function(t){e=t.cclegacy,c=t._decorator},function(t){o=t.default}],execute:function(){var n,r;e._RF.push({},"5908aTmM1lItpXgo7ROpQeQ","CCVMParentComp",void 0);const{ccclass:s,property:a}=c;t("CCVMParentComp",s("CCVMParentComp")(((r=class extends o{constructor(...t){super(...t),this.canRecycle=void 0,this.ent=void 0}}).tid=-1,r.compName=void 0,n=r))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Collection.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"1dcf5AtQQVK3KQ/2jHHD5gi","Collection",void 0);class e extends Map{constructor(...r){super(...r),this._array=[]}get array(){return this._array}set(r,t){if(this.has(r)){var e=this.get(r),s=this._array.indexOf(e);this._array[s]=t}else this._array.push(t);return super.set(r,t)}delete(r){const t=this.get(r);if(t){const e=this._array.indexOf(t);return e>-1&&this._array.splice(e,1),super.delete(r)}return!1}clear(){this._array.splice(0,this._array.length),super.clear()}}r("Collection",e),t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./Oops.ts"],(function(t){var n,e,i,o,c,l,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t._decorator,c=t.Component},function(t){l=t.LanguageLabel},function(t){s=t.oops}],execute:function(){var a,r,u,h,f,b,p,g,d,m,_;i._RF.push({},"0975dBNDlVI9LWr34+VBNqn","CommonPrompt",void 0);const{ccclass:y,property:C}=o;t("CommonPrompt",(a=y("CommonPrompt"),r=C(l),u=C(l),h=C(l),f=C(l),a((g=n((p=class extends c{constructor(...t){super(...t),e(this,"lab_title",g,this),e(this,"lab_content",d,this),e(this,"lab_ok",m,this),e(this,"lab_cancel",_,this),this.config={}}onAdded(t){return this.config=t||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0,!0}setTitle(){this.lab_title.dataID=this.config.title}setContent(){this.lab_content.dataID=this.config.content}setBtnOkLabel(){this.lab_ok.dataID=this.config.okWord}setBtnCancelLabel(){this.lab_cancel&&(this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1)}onOk(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()}onClose(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()}onCancel(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()}close(){s.gui.removeByNode(this.node)}onDestroy(){this.config=null}}).prototype,"lab_title",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(p.prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(p.prototype,"lab_ok",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(p.prototype,"lab_cancel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1b470jn3U9MD4t7bi3DjNo8","Config",void 0);t("Config",class{constructor(){this.game=void 0,this.query=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(...t){super(...t),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"074feE6NYlEJbThpSQedHdt","Defines",void 0);s("ViewParams",class{constructor(){this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["cc","./Oops.ts"],(function(e){var o,n,t,s;return{setters:[function(e){o=e.cclegacy,n=e.Component,t=e._decorator},function(e){s=e.oops}],execute:function(){var i;o._RF.push({},"22780C0A4lFJ7LpakBrRovO","DelegateComponent",void 0);const{ccclass:a}=t;e("DelegateComponent",a("DelegateComponent")(i=class extends n{constructor(...e){super(...e),this.vp=null,this.onCloseWindow=null}add(){return new Promise((async(e,o)=>{for(let o=0;o<this.node.components.length;o++){const n=this.node.components[o],t=n.onAdded;if(t&&0==await t.call(n,this.vp.params))return void e(!1)}"function"==typeof this.vp.callbacks.onAdded&&this.vp.callbacks.onAdded(this.node,this.vp.params),e(!0)}))}remove(e){this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,e)):this.removed(this.vp,e))}onBeforeRemoveNext(e){this.removed(this.vp,e)}removed(e,o){e.valid=!1,e.callbacks&&"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onCloseWindow&&this.onCloseWindow(e),o?(this.node.destroy(),s.res.release(e.config.prefab)):this.node.removeFromParent()}onDestroy(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null}applyComponentsFunction(e,o,n){for(let t=0;t<e.components.length;t++){const s=e.components[t],i=s[o];i&&i.call(s,n)}}})||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/ECS.ts",["cc","./ECSComp.ts","./ECSEntity.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts"],(function(t){var e,n,i,o,r,c,s,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.ECSComp},function(t){i=t.ECSEntity},function(t){o=t.ECSMatcher},function(t){r=t.ECSModel},function(t){c=t.ECSSystem,s=t.ECSRootSystem,u=t.ECSComblockSystem}],execute:function(){let d;t("ecs",void 0),e._RF.push({},"be87fT76plLkaUKEYpkuV0n","ECS",void 0),function(t){const e=t.Entity=i;t.Comp=n,t.System=c,t.RootSystem=s,t.ComblockSystem=u;function l(t){return function(){let t=new e;return t.eid=r.eid++,r.eid2Entity.set(t.eid,t),t}().add(t)}t.register=function(t,e=!0){return function(n){if(n.s){var i=r.systems.get(t);null==i&&(i=new d.System,r.systems.set(t,i)),i.add(new n)}else if(null==n.tid)r.entityCtors.set(n,t);else{if(-1!==n.tid)throw new Error(`重复注册组件： ${t}.`);n.tid=r.compTid++,n.compName=t,e?(r.compCtors.push(n),r.compPools.set(n.tid,[])):r.compCtors.push(null),r.compAddOrRemove.set(n.tid,[])}}},t.getEntity=function(t){var e=r.entityCtors.get(t);null==e&&console.error(`${t.name} 实体没有注册`);var n=(r.entityPool.get(e)||[]).pop();return n||((n=new t).eid=r.eid++,n.name=e),n.init?(n.isValid=!0,n.init()):console.error(`${t.name} 实体缺少 init 方法初始化默认组件`),r.eid2Entity.set(n.eid,n),n},t.query=function(t){let e=r.groups.get(t.mid);return e||(e=r.createGroup(t),r.eid2Entity.forEach(e.onComponentAddOrRemove,e)),e.matchEntities},t.clear=function(){r.eid2Entity.forEach((t=>{t.destroy()})),r.groups.forEach((t=>{t.clear()})),r.compAddOrRemove.forEach((t=>{t.length=0})),r.eid2Entity.clear(),r.groups.clear()},t.getEntityByEid=function(t){return r.eid2Entity.get(t)},t.activeEntityCount=function(){return r.eid2Entity.size},t.allOf=function(...t){return(new o).allOf(...t)},t.anyOf=function(...t){return(new o).anyOf(...t)},t.onlyOf=function(...t){return(new o).onlyOf(...t)},t.excludeOf=function(...t){return(new o).excludeOf(...t)},t.getSingleton=function(t){if(!r.tid2comp.has(t.tid)){let e=l(t);r.tid2comp.set(t.tid,e)}return r.tid2comp.get(t.tid)},t.addSingleton=function(t){let e=t.constructor.tid;r.tid2comp.has(e)||r.tid2comp.set(e,t)}}(d||(d=t("ecs",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/ECSComp.ts",["cc"],(function(c){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"3d017ZhAZRH4bPfpLr5++8F","ECSComp",void 0);class e{constructor(){this.ent=void 0,this.canRecycle=!0}}c("ECSComp",e),e.tid=-1,e.compName=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/ECSEntity.ts",["cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var e,i,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.ECSMask},function(t){s=t.ECSModel}],execute:function(){function h(t,e){let i=s.compAddOrRemove.get(e);for(let e=i.length-1;e>=0;e--)i[e](t);s.tid2comp.has(e)&&s.tid2comp.delete(e)}e._RF.push({},"1fb62WC3PZPvLhjoZQfrREJ","ECSEntity",void 0);t("ECSEntity",class{constructor(){this.eid=-1,this.name="",this.isValid=!0,this.mask=new i,this.compTid2Ctor=new Map,this.compTid2Obj=new Map,this._parent=null,this._children=null}get parent(){return this._parent}set parent(t){this._parent=t}get children(){return null==this._children&&(this._children=new Map),this._children}addChild(t){t._parent=this,this.children.set(t.eid,t)}removeChild(t,e=!0){null!=this.children&&(t.parent=null,this.children.delete(t.eid),e&&t.destroy())}add(t,e=!1){if("function"==typeof t){let i,o=t.tid;if(-1===t.tid)throw Error(`【${this.name}】实体【${t.compName}】组件未注册`);if(this.compTid2Ctor.has(o)){if(!e)return console.log(`【${this.name}】实体【${t.compName}】组件已存在`),this[t.compName];this.remove(t)}return this.mask.set(o),this.compTid2Obj.has(o)?(i=this.compTid2Obj.get(o),this.compTid2Obj.delete(o)):i=function(t){const e=s.compCtors[t.tid];if(!e)throw Error(`没有找到该组件的构造函数，检查${t.compName}是否为不可构造的组件`);return s.compPools.get(t.tid).pop()||new e}(t),this[t.compName]=i,this.compTid2Ctor.set(o,t),i.ent=this,h(this,o),i}{let e=t.constructor,i=e.tid;if(-1===i||null==i)throw Error(`【${this.name}】实体【${e.name}】组件未注册`);if(this.compTid2Ctor.has(i))throw Error(`【${this.name}】实体【${e.name}】组件已经存在`);return this.mask.set(i),this[e.compName]=t,this.compTid2Ctor.set(i,e),t.ent=this,t.canRecycle=!1,h(this,i),this}}addComponents(...t){for(let e of t)this.add(e);return this}get(t){return this[t.compName]}has(t){return"number"==typeof t?this.mask.has(t):this.compTid2Ctor.has(t.tid)}remove(t,e=!0){let i=!1,o=t.tid,n=t.compName;if(this.mask.has(o)){i=!0;let h=this[t.compName];if(h.ent=null,e){if(h.reset(),h.canRecycle){s.compPools.get(o).push(h)}}else this.compTid2Obj.set(o,h)}i&&(this[n]=null,this.mask.delete(o),this.compTid2Ctor.delete(o),h(this,o))}destroy(){this.isValid=!1,this._parent&&(this._parent.removeChild(this,!1),this._parent=null),this._children&&(this._children.forEach((t=>{this.removeChild(t)})),this._children=null),this.compTid2Ctor.forEach(this._remove,this),function(t){if(s.eid2Entity.has(t.eid)){let e=s.entityPool.get(t.name);null==e&&(e=[],s.entityPool.set(t.name,e)),e.push(t),s.eid2Entity.delete(t.eid)}else console.warn("试图销毁不存在的实体")}(this),this.compTid2Obj.clear()}_remove(t){this.remove(t,!0)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ECSGroup.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c21a23o9P5FNJamcMmoYWfs","ECSGroup",void 0);t("ECSGroup",class{get matchEntities(){return null===this._entitiesCache&&(this._entitiesCache=Array.from(this._matchEntities.values())),this._entitiesCache}get entity(){return this.matchEntities[0]}constructor(t){this.matcher=void 0,this._matchEntities=new Map,this._entitiesCache=null,this.count=0,this._enteredEntities=null,this._removedEntities=null,this.matcher=t}onComponentAddOrRemove(t){this.matcher.isMatch(t)?(this._matchEntities.set(t.eid,t),this._entitiesCache=null,this.count++,this._enteredEntities&&(this._enteredEntities.set(t.eid,t),this._removedEntities.delete(t.eid))):this._matchEntities.has(t.eid)&&(this._matchEntities.delete(t.eid),this._entitiesCache=null,this.count--,this._enteredEntities&&(this._enteredEntities.delete(t.eid),this._removedEntities.set(t.eid,t)))}watchEntityEnterAndRemove(t,e){this._enteredEntities=t,this._removedEntities=e}clear(){this._matchEntities.clear(),this._entitiesCache=null,this.count=0,this._enteredEntities?.clear(),this._removedEntities?.clear()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMask.ts",["cc","./ECSModel.ts"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.ECSModel}],execute:function(){t._RF.push({},"d18694PPbtGs5Ipgo/vaJBX","ECSMask",void 0);s("ECSMask",class{constructor(){this.mask=void 0,this.size=0;let s=Math.ceil(e.compTid/31);this.mask=new Uint32Array(s),this.size=s}set(s){this.mask[s/31>>>0]|=1<<s%31}delete(s){this.mask[s/31>>>0]&=~(1<<s%31)}has(s){return!!(this.mask[s/31>>>0]&1<<s%31)}or(s){for(let t=0;t<this.size;t++)if(this.mask[t]&s.mask[t])return!0;return!1}and(s){for(let t=0;t<this.size;t++)if((this.mask[t]&s.mask[t])!=this.mask[t])return!1;return!0}clear(){for(let s=0;s<this.size;s++)this.mask[s]=0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMatcher.ts",["cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var s,i,e;return{setters:[function(t){s=t.cclegacy},function(t){i=t.ECSMask},function(t){e=t.ECSModel}],execute:function(){s._RF.push({},"37e8arlqPlN7amZYyHFvBIp","ECSMatcher",void 0);let h=1;class r{get key(){if(!this._key){let t="";for(let s=0;s<this.rules.length;s++)t+=this.rules[s].getKey(),s<this.rules.length-1&&(t+=" && ");this._key=t}return this._key}constructor(){this.rules=[],this._indices=null,this.isMatch=void 0,this.mid=-1,this._key=null,this.mid=h++}get indices(){return null===this._indices&&(this._indices=[],this.rules.forEach((t=>{Array.prototype.push.apply(this._indices,t.indices)}))),this._indices}anyOf(...t){return this.rules.push(new c(...t)),this.bindMatchMethod(),this}allOf(...t){return this.rules.push(new u(...t)),this.bindMatchMethod(),this}onlyOf(...t){this.rules.push(new u(...t));let s=[];for(let i of e.compCtors)t.indexOf(i)<0&&s.push(i);return this.rules.push(new l(...s)),this.bindMatchMethod(),this}excludeOf(...t){return this.rules.push(new l(...t)),this.bindMatchMethod(),this}bindMatchMethod(){1===this.rules.length?this.isMatch=this.isMatch1:2===this.rules.length?this.isMatch=this.isMatch2:this.isMatch=this.isMatchMore}isMatch1(t){return this.rules[0].isMatch(t)}isMatch2(t){return this.rules[0].isMatch(t)&&this.rules[1].isMatch(t)}isMatchMore(t){for(let s of this.rules)if(!s.isMatch(t))return!1;return!0}clone(){let t=new r;return t.mid=h++,this.rules.forEach((s=>t.rules.push(s))),t}}t("ECSMatcher",r);class n{constructor(...t){this.indices=[],this.mask=new i;let s=-1,e=t.length;for(let i=0;i<e;i++){if(s="number"==typeof t[i]?t[i]:t[i].tid,-1==s)throw Error("存在没有注册的组件！");this.mask.set(s),this.indices.indexOf(s)<0&&this.indices.push(s)}e>1&&this.indices.sort(((t,s)=>t-s))}toString(){return this.indices.join("-")}}class c extends n{isMatch(t){return this.mask.or(t.mask)}getKey(){return"anyOf:"+this.toString()}}class u extends n{isMatch(t){return this.mask.and(t.mask)}getKey(){return"allOf:"+this.toString()}}class l extends n{getKey(){return"excludeOf:"+this.toString()}isMatch(t){return!this.mask.or(t.mask)}}s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSModel.ts",["cc","./ECSGroup.ts"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy},function(e){o=e.ECSGroup}],execute:function(){t._RF.push({},"1d60egM6r9Gta4Op3VABSGM","ECSModel",void 0);class n{static createGroup(e){let t=n.groups.get(e.mid);if(!t){t=new o(e),n.groups.set(e.mid,t);let p=e.indices;for(let e=0;e<p.length;e++)n.compAddOrRemove.get(p[e]).push(t.onComponentAddOrRemove.bind(t))}return t}}e("ECSModel",n),n.eid=1,n.entityCtors=new Map,n.entityPool=new Map,n.eid2Entity=new Map,n.compTid=0,n.compPools=new Map,n.compCtors=[],n.compAddOrRemove=new Map,n.tid2comp=new Map,n.groups=new Map,n.systems=new Map,t._RF.pop()}}}));

System.register("chunks:///_virtual/ECSSystem.ts",["cc","./ECSModel.ts"],(function(t){var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.ECSModel}],execute:function(){e._RF.push({},"9261fRWg2RBY5kxbFJsY1QC","ECSSystem",void 0);class i{constructor(){this.group=void 0,this.dt=0,this.enteredEntities=null,this.removedEntities=null,this.hasEntityEnter=!1,this.hasEntityRemove=!1,this.hasUpdate=!1,this.tmpExecute=null,this.execute=void 0;let t=Object.hasOwnProperty,e=Object.getPrototypeOf(this),i=t.call(e,"entityEnter"),h=t.call(e,"entityRemove"),o=t.call(e,"firstUpdate"),n=t.call(e,"update");this.hasEntityEnter=i,this.hasEntityRemove=h,this.hasUpdate=n,i||h?(this.enteredEntities=new Map,this.removedEntities=new Map,this.execute=this.execute1,this.group=s.createGroup(this.filter()),this.group.watchEntityEnterAndRemove(this.enteredEntities,this.removedEntities)):(this.execute=this.execute0,this.group=s.createGroup(this.filter())),o&&(this.tmpExecute=this.execute,this.execute=this.updateOnce)}init(){}onDestroy(){}hasEntity(){return this.group.count>0}updateOnce(t){if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){var e=this.enteredEntities.values();for(let t of e)this.entityEnter(t);this.enteredEntities.clear()}for(let t of this.group.matchEntities)this.firstUpdate(t);this.execute=this.tmpExecute,this.execute(t),this.tmpExecute=null}}execute0(t){if(0!==this.group.count&&(this.dt=t,this.hasUpdate))for(let t of this.group.matchEntities)this.update(t)}execute1(t){let e;if(this.removedEntities.size>0){if(this.hasEntityRemove){e=this.removedEntities.values();for(let t of e)this.entityRemove(t)}this.removedEntities.clear()}if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){if(this.hasEntityEnter){e=this.enteredEntities.values();for(let t of e)this.entityEnter(t)}this.enteredEntities.clear()}if(this.hasUpdate)for(let t of this.group.matchEntities)this.update(t)}}}t("ECSComblockSystem",i),i.s=!0;t("ECSRootSystem",class{constructor(){this.executeSystemFlows=[],this.systemCnt=0}add(t){return t instanceof h?Array.prototype.push.apply(this.executeSystemFlows,t.comblockSystems):this.executeSystemFlows.push(t),this.systemCnt=this.executeSystemFlows.length,this}init(){s.systems.forEach((t=>this.add(t))),this.executeSystemFlows.forEach((t=>t.init()))}execute(t){for(let e=0;e<this.systemCnt;e++)this.executeSystemFlows[e].execute(t)}clear(){this.executeSystemFlows.forEach((t=>t.onDestroy()))}});class h{constructor(){this._comblockSystems=[]}get comblockSystems(){return this._comblockSystems}add(t){return t instanceof h?(Array.prototype.push.apply(this._comblockSystems,t._comblockSystems),t._comblockSystems.length=0):this._comblockSystems.push(t),this}}t("ECSSystem",h),e._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.MessageEventData}],execute:function(){t._RF.push({},"c680af5iPNKeIO4cArf/90m","EventDispatcher",void 0);s("EventDispatcher",class{constructor(){this._msg=null}on(s,t,n){null==this._msg&&(this._msg=new e),this._msg.on(s,t,n)}off(s){this._msg&&this._msg.off(s)}dispatchEvent(s,...t){null==this._msg&&(this._msg=new e),this._msg.dispatchEvent(s,...t)}destroy(){this._msg&&this._msg.clear(),this._msg=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"beea7u9xnJD4rMj6ua/LTcF","EventMessage",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["cc","./Oops.ts","./EventDispatcher.ts","./EventMessage.ts","./ResLoader.ts","./ViewUtil.ts"],(function(e){var t,s,n,o,i,a,r,h,d,l,c,u,f,p,E;return{setters:[function(e){t=e.cclegacy,s=e.Component,n=e.SpriteFrame,o=e.isValid,i=e.Node,a=e.Button,r=e.EventHandler,h=e.input,d=e.Input,l=e._decorator},function(e){c=e.oops},function(e){u=e.EventDispatcher},function(e){f=e.EventMessage},function(e){p=e.resLoader},function(e){E=e.ViewUtil}],execute:function(){var y;t._RF.push({},"62362nWbWZP653j6XL/zJDq","GameComponent",void 0);const{ccclass:m}=l;var v=function(e){return e[e.Load=0]="Load",e[e.LoadDir=1]="LoadDir",e[e.Audio=2]="Audio",e}(v||{});e("GameComponent",m("GameComponent")(y=class extends s{constructor(...e){super(...e),this._event=null,this.nodes=null,this.resPaths=null}get event(){return null==this._event&&(this._event=new u),this._event}on(e,t,s){this.event.on(e,t,s)}off(e){this.event.off(e)}dispatchEvent(e,...t){this.event.dispatchEvent(e,...t)}getNode(e){if(this.nodes)return this.nodes.get(e)}nodeTreeInfoLite(){this.nodes=new Map,E.nodeTreeInfoLite(this.node,this.nodes)}createPrefabNode(e,t=c.res.defaultBundleName){return E.createPrefabNode(e,t)}createPrefabNodeAsync(e,t=c.res.defaultBundleName){return E.createPrefabNodeAsync(e,t)}getRes(e,t,s){return c.res.get(e,t,s)}addPathToRecord(e,t,s,n){null==this.resPaths&&(this.resPaths=new Map);var o=this.resPaths.get(e);if(null==o&&(o=new Map,this.resPaths.set(e,o)),s instanceof Array){let e=t;for(let t=0;t<s.length;t++){let i=s[t],a=this.getResKey(e,i,n);o.has(a)||o.set(a,{path:i,bundle:e,resId:n})}}else if("string"==typeof s){let e=t,i=s,a=this.getResKey(e,i,n);o.has(a)||o.set(a,{path:i,bundle:e,resId:n})}else{let e=c.res.defaultBundleName,s=t,i=this.getResKey(e,s,n);o.has(i)||o.set(i,{path:s,bundle:e,resId:n})}}getResKey(e,t,s){let n=`${e}:${t}`;return null!=s&&(n+=":"+s),n}load(e,t,s,n,o){this.addPathToRecord(v.Load,e,t),c.res.load(e,t,s,n,o)}loadAsync(e,t,s){return this.addPathToRecord(v.Load,e,t),c.res.loadAsync(e,t,s)}loadDir(e,t,s,n,o){let i,a;"string"==typeof t?(i=t,a=e):(i=e,a=c.res.defaultBundleName),this.addPathToRecord(v.LoadDir,a,i),c.res.loadDir(e,t,s,n,o)}release(){if(this.resPaths){const e=this.resPaths.get(v.Load);e&&(e.forEach((e=>{c.res.release(e.path,e.bundle)})),e.clear())}}releaseDir(){if(this.resPaths){const e=this.resPaths.get(v.LoadDir);e&&e.forEach((e=>{c.res.releaseDir(e.path,e.bundle)}))}}releaseAudioEffect(){if(this.resPaths){const e=this.resPaths.get(v.Audio);e&&e.forEach((e=>{c.audio.putEffect(e.resId,e.path,e.bundle)}))}}async setSprite(e,t,s=p.defaultBundleName){const i=await this.loadAsync(s,t,n);if(i&&o(e))e.spriteFrame=i;else{const e=this.resPaths.get(v.Load);if(e){const n=this.getResKey(s,t);e.delete(n),c.res.release(t,s)}}}playMusic(e,t,s){c.audio.playMusic(e,t,s)}playMusicLoop(e,t){c.audio.stopMusic(),c.audio.playMusicLoop(e,t)}async playEffect(e,t){null==t&&(t=c.res.defaultBundleName);const s=await c.audio.playEffect(e,t,(()=>{const n=this.resPaths.get(v.Audio);if(n){const o=this.getResKey(t,e,s);n.delete(o)}}));this.addPathToRecord(v.Audio,t,e,s)}setButton(e=!0){e&&this.node.on(i.EventType.TOUCH_END,(e=>{const t=this[e.target.name];t&&t.call(this,e)}),this);const t=/<([^>]+)>/;this.node.getComponentsInChildren(a).forEach((e=>{if(this[e.node.name]){const s=new r;s.target=this.node,s.handler=e.node.name,s.component=this.name.match(t)[1],e.clickEvents.push(s)}}))}setEvent(...e){const t=this;for(const s of e){const e=t[s];e?this.on(s,e,this):console.error(`名为【${s}】的全局事方法不存在`)}}setKeyboard(e){e?(h.on(d.EventType.KEY_DOWN,this.onKeyDown,this),h.on(d.EventType.KEY_UP,this.onKeyUp,this),h.on(d.EventType.KEY_PRESSING,this.onKeyPressing,this)):(h.off(d.EventType.KEY_DOWN,this.onKeyDown,this),h.off(d.EventType.KEY_UP,this.onKeyUp,this),h.off(d.EventType.KEY_PRESSING,this.onKeyPressing,this))}onKeyDown(e){}onKeyUp(e){}onKeyPressing(e){}setGameShow(){this.on(f.GAME_SHOW,this.onGameShow,this)}setGameHide(){this.on(f.GAME_HIDE,this.onGameHide,this)}setGameResize(){this.on(f.GAME_RESIZE,this.onGameResize,this)}setGameFullScreen(){this.on(f.GAME_FULL_SCREEN,this.onGameFullScreen,this)}setGameOrientation(){this.on(f.GAME_ORIENTATION,this.onGameOrientation,this)}onGameShow(){}onGameHide(){}onGameResize(){}onGameFullScreen(){}onGameOrientation(){}onDestroy(){this._event&&(this._event.destroy(),this._event=null),this.nodes&&(this.nodes.clear(),this.nodes=null),this.resPaths&&(this.releaseAudioEffect(),this.release(),this.releaseDir(),this.resPaths.clear(),this.resPaths=null)}})||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc","./Oops.ts"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.oops}],execute:function(){e._RF.push({},"8bddcqJ//FIfqkFD8h9QSge","GameConfig",void 0);t("GameConfig",class{get version(){return this._data.config.version}get package(){return this._data.config.package}get frameRate(){return this._data.config.frameRate}get localDataKey(){return this._data.config.localDataKey}get localDataIv(){return this._data.config.localDataIv}get httpServer(){return this._data.config.httpServer}get httpTimeout(){return this._data.config.httpTimeout}get language(){return this._data.language.type||["zh"]}get languagePathJson(){return this._data.language.path.json||"language/json"}get languagePathTexture(){return this._data.language.path.texture||"language/texture"}get languageDefault(){return this._data.language.default||"zh"}get bundleEnable(){return this._data.bundle.enable}get bundleServer(){return this._data.bundle.server}get bundleDefault(){return this._data.bundle.default}get bundlePackages(){return this._data.bundle.packages}get loadingTimeoutGui(){return this._data.config.loadingTimeoutGui||1e3}get data(){return this._data}constructor(t){this._data=null,this._data=Object.freeze(t.json),a.log.logConfig(this._data,"游戏配置")}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"28ac0rWU79HGpJWrnyK01Gn","GameEvent",void 0);e("GameEvent",function(e){return e.GameServerConnected="GameServerConnected",e.LoginSuccess="LoginSuccess",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc"],(function(e){var a,t;return{setters:[function(e){a=e.cclegacy,t=e.director}],execute:function(){a._RF.push({},"73fa0CEfOhMdJUoZwoFIIZV","GameManager",void 0);e("GameManager",class{constructor(e){this.root=void 0,this.root=e}setTimeScale(e){t.globalGameTimeScale=e}getTimeScale(){return t.globalGameTimeScale}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["cc","./Oops.ts","./StringUtil.ts"],(function(t){var e,n,r,i;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){r=t.oops},function(t){i=t.StringUtil}],execute:function(){e._RF.push({},"e130dm4tcpKU5qMOCqJEf3V","GameQueryConfig",void 0);t("GameQueryConfig",class{get debug(){return this._data.debug}get username(){return this._data.username}get lang(){return this._data.lang||"zh"}get data(){return this._data}constructor(){this._data=null,n.isBrowser?(this._data=this.parseUrl(),this._data.username||(this._data.username=i.guid()),r.log.logConfig(this._data,"查询参数")):this._data={}}parseUrl(){if("object"!=typeof window)return{};if(!window.document)return{};let t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){t=t[1].split("&");let e={};for(let n=0,r=t.length;n<r;++n){let r=t[n],i=r.indexOf("=");if(i<0)continue;let s=r.substring(0,i),a=r.substring(i+1);e[decodeURIComponent(s)]=a&&decodeURIComponent(a)}return e}return{}}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Hot.ts",["cc","./Oops.ts","./jsb_md5.ts"],(function(t){var e,s,o,a,i,n,l;return{setters:[function(t){e=t.cclegacy,s=t.log,o=t.sys,a=t.error,i=t.native},function(t){n=t.oops},function(t){l=t.default}],execute:function(){e._RF.push({},"f6377Ckbb9Cg5R2ygFWMOCv","Hot",void 0);t("HotOptions",class{constructor(){this.onVersionInfo=null,this.onNeedToUpdate=null,this.onNoNeedToUpdate=null,this.onUpdateFailed=null,this.onUpdateSucceed=null,this.onUpdateProgress=null}check(){for(let t in this)if("check"!==t&&!this[t])return s(`参数HotOptions.${t}未设置！`),!1;return!0}});class r{constructor(){this.assetsMgr=null,this.options=null,this.state=r.State.None,this.storagePath="",this.manifest=""}init(t){o.isNative&&t.check()&&(this.options=t,this.assetsMgr||n.res.load("project",((t,e)=>{if(t)a("【热更新界面】缺少热更新配置文件");else{this.showSearchPath(),this.manifest=e.nativeUrl,this.storagePath=`${i.fileUtils.getWritablePath()}oops_framework_remote`,this.assetsMgr=new i.AssetsManager(this.manifest,this.storagePath,((t,e)=>{console.log("【热更新】客户端版本: "+t+", 当前最新版本: "+e),this.options?.onVersionInfo&&this.options.onVersionInfo({local:t,server:e});let s=t.split("."),o=e.split(".");for(let t=0;t<s.length;++t){let e=parseInt(s[t]),a=parseInt(o[t]||"0");if(e!==a)return e-a}return o.length>s.length?-1:0})),this.assetsMgr.setVerifyCallback(((t,e)=>{e.compressed,e.md5,e.path,e.size;var s=l(i.fileUtils.getDataFromFile(t));return console.log("path: "+t+"\nresMD5:"+s),!0}));var s=this.assetsMgr.getLocalManifest();console.log("【热更新】热更资源存放路径: "+this.storagePath),console.log("【热更新】本地资源配置路径: "+this.manifest),console.log("【热更新】本地包地址: "+s.getPackageUrl()),console.log("【热更新】远程 project.manifest 地址: "+s.getManifestFileUrl()),console.log("【热更新】远程 version.manifest 地址: "+s.getVersionFileUrl()),this.checkUpdate()}})))}clearHotUpdateStorage(){i.fileUtils.removeDirectory(this.storagePath)}checkUpdate(){this.assetsMgr?this.assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this.assetsMgr.getLocalManifest().isLoaded()?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=r.State.Check,this.assetsMgr.checkUpdate()):console.log("【热更新】加载本地 manifest 失败 ..."):a("【热更新】未初始化"):console.log("【热更新】请先初始化")}hotUpdate(){this.assetsMgr?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=r.State.Update,this.assetsMgr.update()):console.log("【热更新】请先初始化")}onHotUpdateCallBack(t){let e=t.getEventCode();switch(e){case i.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("【热更新】当前版本与远程版本一致且无须更新"),this.options?.onNoNeedToUpdate&&this.options.onNoNeedToUpdate(e);break;case i.EventAssetsManager.NEW_VERSION_FOUND:console.log("【热更新】发现新版本,请更新"),this.options?.onNeedToUpdate&&this.options.onNeedToUpdate(e,this.assetsMgr.getTotalBytes());break;case i.EventAssetsManager.ASSET_UPDATED:console.log("【热更新】资产更新");break;case i.EventAssetsManager.UPDATE_PROGRESSION:this.state===r.State.Update&&(console.log("【热更新】更新中...",t.getDownloadedFiles(),t.getTotalFiles(),t.getPercent()),this.options?.onUpdateProgress&&this.options.onUpdateProgress(t));break;case i.EventAssetsManager.UPDATE_FINISHED:this.onUpdateFinished();break;default:this.onUpdateFailed(e)}}onUpdateFailed(t){this.assetsMgr.setEventCallback(null),this.options?.onUpdateFailed&&this.options.onUpdateFailed(t)}onUpdateFinished(){this.assetsMgr.setEventCallback(null);let t=i.fileUtils.getSearchPaths(),e=this.assetsMgr.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(t,e),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),i.fileUtils.setSearchPaths(t),console.log("【热更新】更新成功"),this.options?.onUpdateSucceed&&this.options.onUpdateSucceed()}showSearchPath(){console.log("========================搜索路径========================");let t=i.fileUtils.getSearchPaths();for(let e=0;e<t.length;e++)console.log("["+e+"]: "+t[e]);console.log("======================================================")}}t("Hot",r),r.State={None:0,Check:1,Update:2},e._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["cc","./Oops.ts","./TipsManager.ts","./UIConfig.ts","./Hot.ts","./LoadingViewComp.ts"],(function(t){var e,a,o,n,s,i,p,d,c,r,g;return{setters:[function(t){e=t.cclegacy,a=t.Component,o=t.sys,n=t.game,s=t._decorator},function(t){i=t.oops},function(t){p=t.tips},function(t){d=t.UIID},function(t){c=t.Hot,r=t.HotOptions},function(t){g=t.LoadingViewComp}],execute:function(){var l;e._RF.push({},"f64deiQLAhLh5HGqUqaI9oA","HotUpdate",void 0);const{ccclass:h,property:u}=s;t("HotUpdate",h("HotUpdate")(l=class extends a{constructor(...t){super(...t),this.hot=new c,this.lv=null}onLoad(){o.isNative&&(this.lv=this.getComponent(g),this.lv.data.prompt=i.language.getLangByID("update_tips_check_update"),this.startHotUpdate())}startHotUpdate(){let t=new r;t.onVersionInfo=t=>{},t.onUpdateProgress=t=>{let e,a,o=t.getPercent(),n=t.getTotalBytes(),s=t.getDownloadedBytes();n<1048576?(n=Math.ceil(n/1024),e=n+"K"):(e=(n/1048576).toFixed(1),e+="M"),s<1048576?(s=Math.ceil(s/1024),a=s+"K"):(a=(s/1048576).toFixed(1),a+="M"),this.lv.data.prompt="0K"==e?i.language.getLangByID("update_tips_check_update"):i.language.getLangByID("update_tips_update")+a+"/"+e+" ("+parseInt(100*o+"")+"%)",isNaN(t.getPercent())||(this.lv.data.finished=t.getDownloadedFiles(),this.lv.data.total=t.getTotalFiles(),this.lv.data.progress=(100*t.getPercent()).toFixed(2))},t.onNeedToUpdate=(t,e)=>{this.lv.data.prompt=i.language.getLangByID("update_tips_new_version");let a="";e<1048576?a=Math.ceil(e/1024)+"KB":(a=(e/1048576).toFixed(1),a+="MB"),this.checkForceUpdate((()=>{this.showUpdateDialog(a,(()=>{this.hot.hotUpdate()}))}))},t.onNoNeedToUpdate=()=>{this.lv.enter()},t.onUpdateFailed=()=>{this.lv.data.prompt=i.language.getLangByID("update_tips_update_fail"),this.hot.checkUpdate()},t.onUpdateSucceed=()=>{this.lv.data.progress=100,this.lv.data.prompt=i.language.getLangByID("update_tips_update_success"),setTimeout((()=>{n.restart()}),1e3)},this.hot.init(t)}checkForceUpdate(t){let e={title:"common_prompt_title_sys",content:"update_tips_force",okWord:"common_prompt_ok",cancelWord:"common_prompt_cancal",okFunc:()=>{this.hot.clearHotUpdateStorage(),t()},cancelFunc:()=>{n.end()},needCancel:!0};i.gui.open(d.Confirm,e)}showUpdateDialog(t,e){o.getNetworkType()!=o.NetworkType.LAN?p.alert(i.language.getLangByID("update_nowifi_tip")+t,e):e()}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["cc"],(function(e){var t,r,s;return{setters:[function(e){t=e.cclegacy,r=e.error,s=e.warn}],execute:function(){t._RF.push({},"ca706EEjWJIcJ4vmzsqkk8S","HttpRequest",void 0);var n={},u={};let a=e("HttpEvent",function(e){return e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout",e}({}));class i{constructor(){this.isSucc=!1,this.res=void 0,this.err=void 0}}e("HttpReturn",i);e("HttpRequest",class{constructor(){this.server="http://127.0.0.1/",this.timeout=1e4,this.header=new Map}addHeader(e,t){this.header.set(e,t)}get(e,t,r=null){this.sendRequest(e,r,!1,t)}getAsync(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!1,(e=>{r(e)}))}))}getByArraybuffer(e,t,r=null){this.sendRequest(e,r,!1,t,"arraybuffer",!1)}getAsyncByArraybuffer(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!1,(e=>{r(e)}),"arraybuffer",!1)}))}post(e,t,r=null){this.sendRequest(e,r,!0,t)}postAsync(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!0,(e=>{r(e)}))}))}abort(e){var t=n[this.server+e];t&&t.abort()}getParamString(e){var t="";for(var r in e){let n=e[r];if(n instanceof Object)for(var s in n)t+=`${s}=${n[s]}&`;else t+=`${r}=${n}&`}return t.substring(0,t.length-1)}sendRequest(e,t,o,c,h,l=!0){if(null!=e&&""!=e){var d,p,f="";if(d=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,t?(f=this.getParamString(t),p=d.indexOf("?")>-1?d+"&"+f:d+"?"+f):p=d,null==n[p]||u[p]!=f){var R=new XMLHttpRequest;n[p]=R,u[p]=f,o?R.open("POST",d):R.open("GET",p);for(const[e,t]of this.header)R.setRequestHeader(e,t);var v={};v.url=d,v.params=t,l&&(R.timeout=this.timeout,R.ontimeout=()=>{this.deleteCache(p),y.isSucc=!1,y.err=a.TIMEOUT,c(v)});var y=new i;R.onloadend=()=>{500==R.status&&(this.deleteCache(p),y.isSucc=!1,y.err=a.NO_NETWORK,c(y))},R.onerror=()=>{this.deleteCache(p),y.isSucc=!1,0==R.readyState||1==R.readyState||0==R.status?y.err=a.NO_NETWORK:y.err=a.UNKNOWN_ERROR,c(y)},R.onreadystatechange=()=>{4==R.readyState&&(this.deleteCache(p),200==R.status&&c&&(y.isSucc=!0,"arraybuffer"==h?(R.responseType=h,y.res=R.response):y.res=JSON.parse(R.response),c(y)))},null==t||""==t?R.send():R.send(f)}else s(`地址【${d}】已正在请求中，不能重复请求`)}else r("请求地址不能为空")}deleteCache(e){delete n[e],delete u[e]}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){var t,n,a;return{setters:[function(e){t=e.cclegacy,n=e.Color,a=e.Texture2D}],execute:function(){t._RF.push({},"ebdf3rRnEdIYpKgGdW8gSmZ","ImageUtil",void 0);e("ImageUtil",class{static getPixelColor(e,t,a){const o=document.createElement("canvas"),r=o.getContext("2d");o.width=e.width,o.height=e.height;const i=e.image?.data;r.drawImage(i,0,0,e.width,e.height);const c=r.getImageData(0,0,e.width,e.height),g=(a-1)*e.width*4+4*(t-1),s=c.data.slice(g,g+4),m=new n(s[0],s[1],s[2],s[3]);return i.remove(),o.remove(),m}static imageToBase64(e,t){return new Promise((n=>{let a=/\.png|\.jpg|\.jpeg/.exec(e)?.[0];if([".png",".jpg",".jpeg"].includes(a)){const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.src=e,i.onload=()=>{o.height=i.height,o.width=i.width,r.drawImage(i,0,0),a=".jpg"===a?"jpeg":a.replace(".","");const e=o.toDataURL(`image/${a}`);t&&t(e),n(e),i.remove(),o.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(""),n("")}))}static base64ToTexture(e){const t=document.createElement("img");t.src=e;const n=new a;return n.initWithElement(t),t.remove(),n}static base64ToBlob(e){const t=e.split(","),n=/image\/\w+|;/.exec(t[0])[0],a=window.atob(t[1]),o=new ArrayBuffer(a.length),r=new Uint8Array(o);for(let e=0;e<a.length;e++)r[e]=255&a.charCodeAt(e);return new Blob([r],{type:n})}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Initialize.ts",["cc","./ECS.ts","./InitRes.ts"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy},function(t){e=t.ecs},function(t){n=t.InitResComp}],execute:function(){var s;i._RF.push({},"ffbceQs6Z9IoI5z6mt1avMw","Initialize",void 0);t("Initialize",e.register("Initialize")(s=class extends e.Entity{init(){this.add(n)}})||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/InitRes.ts",["cc","./Oops.ts","./AsyncQueue.ts","./ECS.ts","./UIConfig.ts","./LoadingViewComp.ts"],(function(e){var t,n,o,s,a,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.oops},function(e){o=e.AsyncQueue},function(e){s=e.ecs},function(e){a=e.UIID},function(e){i=e.LoadingViewComp}],execute:function(){var u,l;t._RF.push({},"2ee0c8+7R9EFKQb+OPn9mlk","InitRes",void 0);let g=e("InitResComp",s.register("InitRes")(u=class extends s.Comp{reset(){}})||u);e("InitResSystem",s.register("Initialize")(l=class extends s.ComblockSystem{filter(){return s.allOf(g)}entityEnter(e){var t=new o;this.loadCustom(t),this.loadLanguage(t),this.loadCommon(t),this.onComplete(t,e),t.play()}loadCustom(e){e.push((async(e,t,o)=>{n.res.load("language/font/"+n.language.current,e)}))}loadLanguage(e){e.push(((e,t,o)=>{let s=n.storage.get("language");null!=s&&""!=s||(s="zh",n.storage.set("language",s)),n.language.setLanguage(s,e)}))}loadCommon(e){e.push(((e,t,o)=>{n.res.loadDir("common",e)}))}onComplete(e,t){e.complete=async()=>{var e=await n.gui.openAsync(a.Loading);e&&t.add(e.getComponent(i)),t.remove(g)}}})||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/jsb_md5.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t("default",(function(t){function n(t){var n=(t>>>24).toString(16),r=(16777215&t).toString(16);return"00".substr(0,2-n.length)+n+"000000".substr(0,6-r.length)+r}function r(t,n,r){return t&n|~t&r}function u(t,n,r){return r&t|~r&n}function e(t,n,r){return t^n^r}function o(t,n,r){return n^(t|~r)}function c(t,n){return t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]}if(!(t instanceof Uint8Array))return function(t){try{console.log(t)}catch(t){}}("input data type mismatch only support Uint8Array"),null;for(var i=[],f=0;f<t.byteLength;f++)i.push(t[f]);var a=i.length;i.push(128);var s=i.length%64;if(s>56){for(f=0;f<64-s;f++)i.push(0);s=i.length%64}for(f=0;f<56-s;f++)i.push(0);i=i.concat(function(t){for(var n=[],r=0;r<8;r++)n.push(255&t),t>>>=8;return n}(8*a));var h=1732584193,l=4023233417,p=2562383102,v=271733878,g=0,y=0,b=0,d=0;function m(t,n){return 4294967295&t+n}var _=function(t,n,r,u){var e,o,c=d;d=b,b=y,y=m(y,(e=m(g,m(t,m(n,r))))<<(o=u)&4294967295|e>>>32-o),g=c};for(f=0;f<i.length/64;f++){g=h;var S=64*f;_(r(y=l,b=p,d=v),3614090360,c(i,S),7),_(r(y,b,d),3905402710,c(i,S+4),12),_(r(y,b,d),606105819,c(i,S+8),17),_(r(y,b,d),3250441966,c(i,S+12),22),_(r(y,b,d),4118548399,c(i,S+16),7),_(r(y,b,d),1200080426,c(i,S+20),12),_(r(y,b,d),2821735955,c(i,S+24),17),_(r(y,b,d),4249261313,c(i,S+28),22),_(r(y,b,d),1770035416,c(i,S+32),7),_(r(y,b,d),2336552879,c(i,S+36),12),_(r(y,b,d),4294925233,c(i,S+40),17),_(r(y,b,d),2304563134,c(i,S+44),22),_(r(y,b,d),1804603682,c(i,S+48),7),_(r(y,b,d),4254626195,c(i,S+52),12),_(r(y,b,d),2792965006,c(i,S+56),17),_(r(y,b,d),1236535329,c(i,S+60),22),_(u(y,b,d),4129170786,c(i,S+4),5),_(u(y,b,d),3225465664,c(i,S+24),9),_(u(y,b,d),643717713,c(i,S+44),14),_(u(y,b,d),3921069994,c(i,S),20),_(u(y,b,d),3593408605,c(i,S+20),5),_(u(y,b,d),38016083,c(i,S+40),9),_(u(y,b,d),3634488961,c(i,S+60),14),_(u(y,b,d),3889429448,c(i,S+16),20),_(u(y,b,d),568446438,c(i,S+36),5),_(u(y,b,d),3275163606,c(i,S+56),9),_(u(y,b,d),4107603335,c(i,S+12),14),_(u(y,b,d),1163531501,c(i,S+32),20),_(u(y,b,d),2850285829,c(i,S+52),5),_(u(y,b,d),4243563512,c(i,S+8),9),_(u(y,b,d),1735328473,c(i,S+28),14),_(u(y,b,d),2368359562,c(i,S+48),20),_(e(y,b,d),4294588738,c(i,S+20),4),_(e(y,b,d),2272392833,c(i,S+32),11),_(e(y,b,d),1839030562,c(i,S+44),16),_(e(y,b,d),4259657740,c(i,S+56),23),_(e(y,b,d),2763975236,c(i,S+4),4),_(e(y,b,d),1272893353,c(i,S+16),11),_(e(y,b,d),4139469664,c(i,S+28),16),_(e(y,b,d),3200236656,c(i,S+40),23),_(e(y,b,d),681279174,c(i,S+52),4),_(e(y,b,d),3936430074,c(i,S),11),_(e(y,b,d),3572445317,c(i,S+12),16),_(e(y,b,d),76029189,c(i,S+24),23),_(e(y,b,d),3654602809,c(i,S+36),4),_(e(y,b,d),3873151461,c(i,S+48),11),_(e(y,b,d),530742520,c(i,S+60),16),_(e(y,b,d),3299628645,c(i,S+8),23),_(o(y,b,d),4096336452,c(i,S),6),_(o(y,b,d),1126891415,c(i,S+28),10),_(o(y,b,d),2878612391,c(i,S+56),15),_(o(y,b,d),4237533241,c(i,S+20),21),_(o(y,b,d),1700485571,c(i,S+48),6),_(o(y,b,d),2399980690,c(i,S+12),10),_(o(y,b,d),4293915773,c(i,S+40),15),_(o(y,b,d),2240044497,c(i,S+4),21),_(o(y,b,d),1873313359,c(i,S+32),6),_(o(y,b,d),4264355552,c(i,S+60),10),_(o(y,b,d),2734768916,c(i,S+24),15),_(o(y,b,d),1309151649,c(i,S+52),21),_(o(y,b,d),4149444226,c(i,S+16),6),_(o(y,b,d),3174756917,c(i,S+44),10),_(o(y,b,d),718787259,c(i,S+8),15),_(o(y,b,d),3951481745,c(i,S+36),21),h=m(h,g),l=m(l,y),p=m(p,b),v=m(v,d)}return function(t,r,u,e){for(var o="",c=0,i=0,f=3;f>=0;f--)c=255&(i=arguments[f]),c<<=8,c|=255&(i>>>=8),c<<=8,c|=255&(i>>>=8),c<<=8,o+=n(c|=i>>>=8);return o}(v,p,l,h).toLowerCase()})),n._RF.push({},"7d55b38ebNClLCkptwHSF4R","jsb_md5",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/JsonOb.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"000b00Lx19Ke4hAFc9/Qlnh","JsonOb",void 0);const r=Object.prototype,o="[object Object]",c="[object Array]",s=["push","pop","shift","unshift","sort","reverse","splice"];t("JsonOb",class{constructor(t,e){this._callback=void 0,r.toString.call(t)!==o&&r.toString.call(t)!==c&&console.error("请传入一个对象或数组"),this._callback=e,this.observe(t)}observe(t,e){r.toString.call(t)===c&&this.overrideArrayProto(t,e),Object.keys(t).forEach((s=>{let i=this,n=t[s],l=e&&e.slice();l?l.push(s):l=[s],Object.defineProperty(t,s,{get:function(){return n},set:function(t){if(n!==t){"[object Object]"===r.toString.call(t)&&i.observe(t,l);const e=n;n=t,i._callback(t,e,l)}}}),r.toString.call(t[s])!==o&&r.toString.call(t[s])!==c||this.observe(t[s],l)}),this)}overrideArrayProto(t,e){var r,o=Array.prototype,c=Object.create(Array.prototype),i=this;s.forEach((t=>{Object.defineProperty(c,t,{value:function(){var c=this.slice();return r=o[t].apply(this,arguments),i.observe(this,e),i._callback(this,c,e),r}})})),t.__proto__=c}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy,t=e.JsonAsset},function(e){n=e.resLoader}],execute:function(){s._RF.push({},"0c54eiAvyVHf4v19zkZppzr","JsonUtil",void 0);const a="config/game/",o=new Map;e("JsonUtil",class{static get(e){if(o.has(e))return o.get(e)}static load(e,s){if(o.has(e))s(o.get(e));else{const r=a+e;n.load(r,t,((t,a)=>{t?(console.warn(t.message),s(null)):(o.set(e,a.json),n.release(r),s(a.json))}))}}static loadAsync(e){return new Promise(((s,r)=>{if(o.has(e))s(o.get(e));else{const r=a+e;n.load(r,t,((t,a)=>{t?(console.warn(t.message),s(null)):(o.set(e,a.json),n.release(r),s(a.json))}))}}))}static loadDirAsync(){return new Promise(((e,s)=>{n.loadDir(a,((s,t)=>{s?(console.warn(s.message),e(!1)):(t.forEach((e=>{o.set(e.name,e.json)})),n.releaseDir(a),e(!0))}))}))}static release(e){o.delete(e)}static clear(){o.clear()}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["cc","./Logger.ts","./LanguageData.ts","./LanguagePack.ts"],(function(a){var e,g,t,n,s;return{setters:[function(a){e=a.cclegacy,g=a.sys},function(a){t=a.Logger},function(a){n=a.LanguageData},function(a){s=a.LanguagePack}],execute:function(){e._RF.push({},"fab64o1M7xDYqiQfEnfZzvG","Language",void 0);a("LanguageManager",class{constructor(){this._languages=[g.Language.CHINESE,g.Language.ENGLISH],this._languagePack=new s,this._defaultLanguage=g.Language.CHINESE}get languages(){return this._languages}set languages(a){this._languages=a}set default(a){this._defaultLanguage=a||g.Language.CHINESE}get current(){return n.current}get pack(){return this._languagePack}isExist(a){return this.languages.indexOf(a)>-1}getNextLang(){let a=this.languages,e=a.indexOf(n.current);return a[(e+1)%a.length]}setLanguage(a,e){a=null==a||""==a?this._defaultLanguage:a.toLowerCase(),this.languages.indexOf(a)<0&&(console.log(`当前不支持【${a}】语言，将自动切换到【${this._defaultLanguage}】语言`),a=this._defaultLanguage),a!==n.current?this.loadLanguageAssets(a,(g=>{t.logConfig(`当前语言为【${a}】`);const s=n.current;n.current=a,this._languagePack.updateLanguage(a),this._languagePack.releaseLanguageAssets(s),e&&e(!0)})):e&&e(!1)}getLangByID(a){return n.getLangByID(a)}loadLanguageAssets(a,e){return a=a.toLowerCase(),this._languagePack.loadLanguageAssets(a,e)}releaseLanguageAssets(a){a=a.toLowerCase(),this._languagePack.releaseLanguageAssets(a)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"66e9advc7pOs4icAC+pXpiR","LanguageData",void 0);class t{static getLangByID(e){const a=this.json[e];if(a)return a;if(this.excel){const a=this.excel[e];if(a)return a[this.current]}return e}}e("LanguageData",t),t.path_json="language/json",t.path_texture="language/texture",t.path_spine="language/spine",t.current="",t.json={},t.excel=null,t.font=null;e("LanguageType",["LanguageLabel","LanguageSprite","LanguageSpine"]);a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){var e,a,i,r,n,s,o,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.CCString,n=t._decorator,s=t.Component,o=t.warn,p=t.Label,l=t.RichText},function(t){u=t.LanguageData}],execute:function(){var g,c,h,d,m,b,y,L,_,f,D,I,z,C;i._RF.push({},"2912bdZLbVCC61WUfCp21tj","LanguageLabel",void 0);const{ccclass:v,property:w,menu:U}=n;let k=t("LangLabelParamsItem",v("LangLabelParamsItem")((h=e((c=class{constructor(){a(this,"key",h,this),a(this,"value",d,this)}}).prototype,"key",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(c.prototype,"value",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=c))||g);t("LanguageLabel",(m=v("LanguageLabel"),b=U("OopsFramework/Language/LanguageLabel （文本多语言）"),y=w({type:k,displayName:"params"}),L=w({type:k,displayName:"params"}),_=w({serializable:!0}),f=w({type:r,serializable:!0}),m(D=b((z=e((I=class extends s{constructor(...t){super(...t),a(this,"_params",z,this),a(this,"_dataID",C,this),this.initFontSize=0,this._needUpdate=!1}set params(t){this._params=t,this._needUpdate=!0}get params(){return this._params||[]}get dataID(){return this._dataID||""}set dataID(t){this._dataID=t,this._needUpdate=!0}get string(){let t=u.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((e=>{t=t.replace(`%{${e.key}}`,e.value)})),t||(o("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}language(){this._needUpdate=!0}onLoad(){this._needUpdate=!0}setVars(t,e){let a=!1;for(let i=0;i<this._params.length;i++){let r=this._params[i];r.key===t&&(r.value=e,a=!0)}if(!a){let a=new k;a.key=t,a.value=e,this._params.push(a)}this._needUpdate=!0}update(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)}updateContent(){const t=this.getComponent(p),e=this.getComponent(l),a=u.font;t?(a&&(t.font=a),t.string=this.string,this.initFontSize=t.fontSize):e?(a&&(e.font=a),e.string=this.string,this.initFontSize=e.fontSize):o("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")}}).prototype,"_params",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(I.prototype,"params",[L],Object.getOwnPropertyDescriptor(I.prototype,"params"),I.prototype),C=e(I.prototype,"_dataID",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(I.prototype,"dataID",[f],Object.getOwnPropertyDescriptor(I.prototype,"dataID"),I.prototype),D=I))||D)||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["cc","./ResLoader.ts","./Logger.ts","./JsonUtil.ts","./LanguageData.ts"],(function(e){var n,a,t,o,l,s,r,g,i,u;return{setters:[function(e){n=e.cclegacy,a=e.director,t=e.error,o=e.JsonAsset,l=e.TTFFont},function(e){s=e.resLoader},function(e){r=e.Logger},function(e){g=e.JsonUtil},function(e){i=e.LanguageType,u=e.LanguageData}],execute:function(){n._RF.push({},"d418bx0fG5D8qHuzXUziGrQ","LanguagePack",void 0);e("LanguagePack",class{updateLanguage(e){let n=a.getScene().children;for(let e=0;e<n.length;++e)i.forEach((a=>{let t=n[e].getComponentsInChildren(a);for(let e=0;e<t.length;e++)t[e].language()}))}async loadLanguageAssets(e,n){await this.loadTexture(e),await this.loadSpine(e),await this.loadJson(e),await this.loadTable(e),n(e)}loadTable(e){return new Promise((async(e,n)=>{u.excel=await g.loadAsync("Language"),u.excel&&r.logConfig("config/game/Language","下载语言包 table 资源"),e(null)}))}loadTexture(e){return new Promise(((n,a)=>{const o=`${u.path_texture}/${e}`;s.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);r.logConfig(o,"下载语言包 textures 资源"),n(null)}))}))}loadJson(e){return new Promise((async(n,a)=>{const t=`${u.path_json}/${e}`,g=await s.loadAsync(t,o);g?(u.json=g.json,r.logConfig(t,"下载语言包 json 资源"),s.load(t,l,((e,a)=>{null==e&&r.logConfig(t,"下载语言包 ttf 资源"),u.font=a,n(null)}))):n(null)}))}loadSpine(e){return new Promise((async(n,a)=>{const o=`${u.path_spine}/${e}`;s.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);r.logConfig(o,"下载语言包 spine 资源"),n(null)}))}))}releaseLanguageAssets(e){let n=`${u.path_texture}/${e}`;s.releaseDir(n);let a=`${u.path_json}/${e}`,t=s.get(a,o);t&&t.decRef();let r=s.get(a,l);r&&r.decRef();let g=`${u.path_spine}/${e}`;s.release(g)}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,n,i,o,r,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.CCString,o=e._decorator,r=e.Component,s=e.sp},function(e){p=e.resLoader},function(e){u=e.LanguageData}],execute:function(){var l,g,c,d,D,S,h;n._RF.push({},"dc440bkNh5AJZUoAd5OSrLX","LanguageSpine",void 0);const{ccclass:L,property:f,menu:m}=o;e("LanguageSpine",(l=L("LanguageSpine"),g=m("OopsFramework/Language/LanguageSpine （Spine 动画多语言）"),c=f({serializable:!0}),d=f({type:i,serializable:!0}),l(D=g((h=t((S=class extends r{constructor(...e){super(...e),a(this,"_dataID",h,this),this._defaultAnimation=""}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSpine()}onLoad(){let e=this.getComponent(s.Skeleton);this._defaultAnimation=e.animation}start(){this.updateSpine()}language(){this.updateSpine()}updateSpine(){let e=`language/spine/${u.current}/${this.dataID}`,t=p.get(e,s.SkeletonData);if(t){let e=this.getComponent(s.Skeleton);e.skeletonData=t,e.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+e)}}).prototype,"_dataID",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(S.prototype,"dataID",[d],Object.getOwnPropertyDescriptor(S.prototype,"dataID"),S.prototype),D=S))||D)||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,r,i,n,o,s,p,u,g,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.CCString,n=e._decorator,o=e.Component,s=e.SpriteFrame,p=e.Sprite,u=e.UITransform},function(e){g=e.resLoader},function(e){l=e.LanguageData}],execute:function(){var c,d,S,D,f,h,y,m,L;r._RF.push({},"96893WW0GlJKqEQ7CHyaHE1","LanguageSprite",void 0);const{ccclass:b,property:z,menu:I}=n;e("LanguageSprite",(c=b("LanguageSprite"),d=I("OopsFramework/Language/LanguageSprite （图片多语言）"),S=z({serializable:!0}),D=z({type:i,serializable:!0}),f=z({tooltip:"是否设置为图片原始资源大小"}),c(h=d((m=t((y=class extends o{constructor(...e){super(...e),a(this,"_dataID",m,this),a(this,"isRawSize",L,this)}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSprite()}start(){this.updateSprite()}language(){this.updateSprite()}updateSprite(){let e=`language/texture/${l.current}/${this.dataID}/spriteFrame`,t=g.get(e,s);if(t){let e=this.getComponent(p);if(e.spriteFrame=t,this.isRawSize){let a=t._originalSize;e.getComponent(u)?.setContentSize(a)}}else console.error("[LanguageSprite] 资源不存在 "+e)}}).prototype,"_dataID",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(y.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(y.prototype,"dataID"),y.prototype),L=t(y.prototype,"isRawSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=y))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["cc","./Defines.ts","./LayerPopup.ts"],(function(s){var e,a,t;return{setters:[function(s){e=s.cclegacy},function(s){a=s.ViewParams},function(s){t=s.LayerPopUp}],execute:function(){e._RF.push({},"e07c4hrtEVJ8J5+niOmEdLS","LayerDialog",void 0);s("LayerDialog",class extends t{constructor(...s){super(...s),this.params=[]}add(s,e,a){this.ui_nodes.size>0?this.params.push({config:s,params:e,callbacks:a}):(this.black.enabled=!0,this.show(s,e,a))}show(s,e,t){let i=this.ui_cache.get(s.prefab);null==i&&(i=new a,i.valid=!0,i.config=s),i.params=e||{},i.callbacks=t??{},this.ui_nodes.set(i.config.prefab,i),this.load(i,s.bundle)}onCloseWindow(s){super.onCloseWindow(s),setTimeout(this.next.bind(this),0)}setBlackDisable(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())}next(){if(this.params.length>0){let s=this.params.shift();this.show(s.config,s.params,s.callbacks)}}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc","./Oops.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts"],(function(e){var i,t,s,a,o,n,r,h,p,c,l,d,g,u,y;return{setters:[function(e){i=e.cclegacy,t=e.view,s=e.screen,a=e.ResolutionPolicy,o=e.Camera,n=e.warn,r=e.Node,h=e.Layers,p=e.Widget},function(e){c=e.oops},function(e){l=e.DelegateComponent},function(e){d=e.LayerDialog},function(e){g=e.LayerNotify},function(e){u=e.LayerPopUp},function(e){y=e.LayerUI}],execute:function(){i._RF.push({},"36af4HATr9HPbvqCH6R3C/v","LayerManager",void 0);e("ScreenAdapterType",function(e){return e[e.Auto=0]="Auto",e[e.Landscape=1]="Landscape",e[e.Portrait=2]="Portrait",e}({}));let f=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",class{initScreenAdapter(){const e=t.getDesignResolutionSize(),i=s.windowSize;this.windowAspectRatio=i.width/i.height,this.designAspectRatio=e.width/e.height;let o=0,n=0;this.windowAspectRatio>this.designAspectRatio?(n=e.height,o=n*i.width/i.height,c.log.logView("适配屏幕高度","【横屏】")):(o=e.width,n=o*i.height/i.width,c.log.logView("适配屏幕宽度","【竖屏】")),t.setDesignResolutionSize(o,n,a.UNKNOWN)}constructor(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.windowAspectRatio=0,this.designAspectRatio=0,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this.root=e,this.initScreenAdapter(),this.camera=this.root.getComponentInChildren(o),this.game=this.create_node(f.Game),this.ui=new y(f.UI),this.popup=new u(f.PopUp),this.dialog=new d(f.Dialog),this.system=new d(f.System),this.notify=new g(f.Notify),this.guide=this.create_node(f.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)}init(e){this.configs=e}setOpenFailure(e){this.ui.onOpenFailure=this.popup.onOpenFailure=this.dialog.onOpenFailure=this.system.onOpenFailure=e}toast(e,i=!1){this.notify.toast(e,i)}waitOpen(){this.notify.waitOpen()}waitClose(){this.notify.waitClose()}setConfig(e,i){this.configs[e]=i}open(e,i=null,t){const s=this.configs[e];if(null!=s)switch(s.layer){case f.UI:this.ui.add(s,i,t);break;case f.PopUp:this.popup.add(s,i,t);break;case f.Dialog:this.dialog.add(s,i,t);break;case f.System:this.system.add(s,i,t)}else n(`打开编号为【${e}】的界面失败，配置信息不存在`)}async openAsync(e,i=null){return new Promise(((t,s)=>{const a={onAdded:(e,i)=>{t(e)},onLoadFailure:()=>{t(null)}};this.open(e,i,a)}))}replace(e,i,t=null){const s={onAdded:(i,t)=>{this.remove(e)}};this.open(i,t,s)}replaceAsync(e,i,t=null){return new Promise((async(s,a)=>{const o=await this.openAsync(i,t);o?(this.remove(e),s(o)):s(null)}))}has(e){const i=this.configs[e];if(null==i)return n(`编号为【${e}】的界面配置不存在，配置信息不存在`),!1;var t=!1;switch(i.layer){case f.UI:t=this.ui.has(i.prefab);break;case f.PopUp:t=this.popup.has(i.prefab);break;case f.Dialog:t=this.dialog.has(i.prefab);break;case f.System:t=this.system.has(i.prefab)}return t}get(e){const i=this.configs[e];if(null==i)return n(`编号为【${e}】的界面配置不存在，配置信息不存在`),null;let t=null;switch(i.layer){case f.UI:t=this.ui.get(i.prefab);break;case f.PopUp:t=this.popup.get(i.prefab);break;case f.Dialog:t=this.dialog.get(i.prefab);break;case f.System:t=this.system.get(i.prefab)}return t}remove(e,i){const t=this.configs[e];if(null!=t)switch(t.layer){case f.UI:this.ui.remove(t.prefab,i);break;case f.PopUp:this.popup.remove(t.prefab,i);break;case f.Dialog:this.dialog.remove(t.prefab,i);break;case f.System:this.system.remove(t.prefab,i)}else n(`删除编号为【${e}】的界面失败，配置信息不存在`)}removeByNode(e,i){if(e instanceof r){let t=e.getComponent(l);if(t&&t.vp){if(e.parent)e.parent.remove(t.vp.config.prefab,i);else if(i)switch(t.vp.config.layer){case f.UI:this.ui.removeCache(t.vp.config.prefab);break;case f.PopUp:this.popup.removeCache(t.vp.config.prefab);break;case f.Dialog:this.dialog.removeCache(t.vp.config.prefab);break;case f.System:this.system.removeCache(t.vp.config.prefab)}}else n("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}}clear(e=!1){this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)}create_node(e){const i=new r(e);i.layer=h.Enum.UI_2D;const t=i.addComponent(p);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["cc","./ViewUtil.ts","./Notify.ts"],(function(t){var i,n,e,o,s,a,l,h;return{setters:[function(t){i=t.cclegacy,n=t.Node,e=t.Widget,o=t.Layers,s=t.BlockInputEvents,a=t.instantiate},function(t){l=t.ViewUtil},function(t){h=t.Notify}],execute:function(){i._RF.push({},"f74d0jh9DZAColymUTZOf1I","LayerNotify",void 0);t("LayerNotify",class extends n{constructor(t){super(t),this.black=void 0,this.wait=null,this.notify=null,this.notifyItem=null;const i=this.addComponent(e);i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,this.init()}init(){this.layer=o.Enum.UI_2D,this.black=this.addComponent(s),this.black.enabled=!1}waitOpen(){null==this.wait&&(this.wait=l.createPrefabNode("common/prefab/wait")),null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0)}waitClose(){this.wait&&this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)}toast(t,i){null==this.notify&&(this.notify=l.createPrefabNode("common/prefab/notify"),this.notifyItem=this.notify.children[0],this.notifyItem.parent=null),this.notify.parent=this;let n=a(this.notifyItem),e=n.getChildByName("prompt").getComponent(h);n.parent=this.notify,e.onComplete=()=>{0==this.notify.children.length&&(this.notify.parent=null)},e.toast(t,i),this.notify.children.length>3&&this.notify.children[0].destroy()}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["cc","./ViewUtil.ts","./LayerUI.ts"],(function(e){var s,t,i,n,a,o;return{setters:[function(e){s=e.cclegacy,t=e.Layers,i=e.BlockInputEvents,n=e.Node},function(e){a=e.ViewUtil},function(e){o=e.LayerUI}],execute:function(){s._RF.push({},"bf144gCpEBKOaCwmuca23b+","LayerPopup",void 0);e("LayerPopUp",class extends o{constructor(e){super(e),this.black=void 0,this.mask=void 0,this.init()}init(){this.layer=t.Enum.UI_2D,this.black=this.addComponent(i),this.black.enabled=!1}async showUi(e){const s=await super.showUi(e);return s&&(this.openVacancyRemove(e.config),this.black.enabled=!0),s}onCloseWindow(e){super.onCloseWindow(e),this.setBlackDisable()}setBlackDisable(){0==this.ui_nodes.size&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())}closeMask(){if(null==this.mask)return;let e=!0;for(let s of this.ui_nodes.values())if(s.config.mask){e=!1;break}e&&(this.mask.parent=null)}openVacancyRemove(e){this.hasEventListener(n.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(n.EventType.TOUCH_END,this.onTouchEnd,this),null==this.mask&&(this.mask=a.createPrefabNode("common/prefab/mask")),e.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0))}closeVacancyRemove(){let e=!0;for(let s of this.ui_nodes.values())if(s.config.vacancy){e=!1;break}e&&this.hasEventListener(n.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(n.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchEnd(e){e.target===this&&this.ui_nodes.forEach((e=>{e.valid&&e.config.vacancy&&this.remove(e.config.prefab,e.config.destroy)}))}clear(e){super.clear(e),this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask()}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["cc","./Oops.ts","./Defines.ts","./DelegateComponent.ts"],(function(e){var i,o,n,t,s,a,c,r;return{setters:[function(e){i=e.cclegacy,o=e.Node,n=e.Widget,t=e.Prefab,s=e.instantiate},function(e){a=e.oops},function(e){c=e.ViewParams},function(e){r=e.DelegateComponent}],execute:function(){i._RF.push({},"e4dc3KuGX5O15Mc1KZBhTTf","LayerUI",void 0);e("LayerUI",class extends o{constructor(e){super(e),this.onOpenFailure=null,this.ui_nodes=new Map,this.ui_cache=new Map;const i=this.addComponent(n);i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0}add(e,i,o){if(this.ui_nodes.has(e.prefab))return void console.warn(`路径为【${e.prefab}】的预制重复加载`);let n=this.ui_cache.get(e.prefab);null==n&&(n=new c,n.config=e),this.ui_nodes.set(e.prefab,n),n.params=i??{},n.callbacks=o??{},n.valid=!0,this.load(n,e.bundle)}async load(e,i){const o=setTimeout(this.onLoadingTimeoutGui,a.config.game.loadingTimeoutGui);if(e&&e.node)await this.showUi(e);else{i=i||a.res.defaultBundleName;const o=await a.res.loadAsync(i,e.config.prefab,t);if(o){const i=s(o);e.node=i;const n=i.addComponent(r);n.vp=e,n.onCloseWindow=this.onCloseWindow.bind(this),await this.showUi(e)}else console.warn(`路径为【${e.config.prefab}】的预制加载失败`),this.failure(e)}a.gui.waitClose(),clearTimeout(o)}onLoadingTimeoutGui(){a.gui.waitOpen()}onCloseWindow(e){this.ui_nodes.delete(e.config.prefab)}async showUi(e){const i=e.node.getComponent(r),o=await i.add();return o?(e.node.parent=this,e.valid=!0):(console.warn(`路径为【${e.config.prefab}】的自定义预处理逻辑异常.检查预制上绑定的组件中 onAdded 方法,返回true才能正确完成窗口显示流程`),this.failure(e)),o}failure(e){this.onCloseWindow(e),e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure(),this.onOpenFailure&&this.onOpenFailure()}remove(e,i){let o;void 0!==i&&(o=i);const n=this.ui_nodes.get(e);if(n){void 0===o&&(o=void 0===n.config.destroy||n.config.destroy),!1===o&&this.ui_cache.set(n.config.prefab,n);n.node.getComponent(r).remove(o)}!0===o&&this.removeCache(e)}removeCache(e){let i=this.ui_cache.get(e);if(i){this.onCloseWindow(i),this.ui_cache.delete(e);i.node.destroy()}}get(e){const i=this.ui_nodes.get(e);return i?i.node:null}has(e){return this.ui_nodes.has(e)}clear(e){this.ui_nodes.forEach(((i,o)=>{this.remove(i.config.prefab,e),i.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach(((e,i)=>{this.removeCache(i)}))}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ListItem.ts"],(function(t){var e,i,s,l,o,n,a,h,r,c,_,d,u,m,p,g,I,y,S,T,f,v,w,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t.ScrollView,o=t.Enum,n=t.Node,a=t.Prefab,h=t.CCFloat,r=t.EventHandler,c=t.CCBoolean,_=t.CCInteger,d=t._decorator,u=t.Component,m=t.Layout,p=t.isValid,g=t.UITransform,I=t.instantiate,y=t.NodePool,S=t.Vec3,T=t.Size,f=t.Widget,v=t.tween},function(t){w=t.DEV},function(t){z=t.default}],execute:function(){var b,D,N,E,P,L,G,C,O,R,A,U,B,M,k,x,V,H,F,X,Y,Z,W,j,q,J,K,Q,$,tt,et,it,st,lt,ot,nt,at,ht,rt,ct,_t,dt,ut;s._RF.push({},"5a154v5bS9CFJrqHSJ56hAS","List",void 0);const{ccclass:mt,property:pt,disallowMultiple:gt,menu:It,executionOrder:yt,requireComponent:St}=d;var Tt=function(t){return t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB",t}(Tt||{}),ft=function(t){return t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE",t}(ft||{}),vt=function(t){return t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT",t}(vt||{});t("default",(b=gt(),D=It("List"),N=St(l),E=yt(-5e3),P=pt({type:o(Tt),tooltip:w}),L=pt({type:n,tooltip:w,visible(){return this.templateType==Tt.NODE}}),G=pt({type:a,tooltip:w,visible(){return this.templateType==Tt.PREFAB}}),C=pt({}),O=pt({type:o(ft),tooltip:w}),R=pt({type:h,range:[0,1,.1],tooltip:w,slide:!0,visible(){return this._slideMode==ft.PAGE}}),A=pt({type:r,tooltip:w,visible(){return this._slideMode==ft.PAGE}}),U=pt({}),B=pt({type:c,tooltip:w}),M=pt({tooltip:w,visible(){let t=this.slideMode==ft.NORMAL;return t||(this.cyclic=!1),t}}),k=pt({tooltip:w,visible(){return this.virtual}}),x=pt({tooltip:w,visible(){let t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}}),V=pt({type:_}),H=pt({type:_,range:[0,6,1],tooltip:w,slide:!0}),F=pt({type:_,range:[0,12,1],tooltip:w,slide:!0}),X=pt({type:r,tooltip:w}),Y=pt({type:o(vt),tooltip:w}),Z=pt({type:r,tooltip:w,visible(){return this.selectedMode>vt.NONE}}),W=pt({tooltip:w,visible(){return this.selectedMode==vt.SINGLE}}),j=pt({serializable:!1}),mt(q=b(q=D(q=N(q=E((K=e((J=class extends u{constructor(...t){super(...t),i(this,"templateType",K,this),i(this,"tmpNode",Q,this),i(this,"tmpPrefab",$,this),i(this,"_slideMode",tt,this),i(this,"pageDistance",et,this),i(this,"pageChangeEvent",it,this),i(this,"_virtual",st,this),i(this,"cyclic",lt,this),i(this,"lackCenter",ot,this),i(this,"lackSlide",nt,this),i(this,"_updateRate",at,this),i(this,"frameByFrameRenderNum",ht,this),i(this,"renderEvent",rt,this),i(this,"selectedMode",ct,this),i(this,"selectedEvent",_t,this),i(this,"repeatEventSingle",dt,this),this._selectedId=-1,this._lastSelectedId=void 0,this.multSelected=void 0,this._forceUpdate=!1,this._align=void 0,this._horizontalDir=void 0,this._verticalDir=void 0,this._startAxis=void 0,this._alignCalcType=void 0,this.content=void 0,this._contentUt=void 0,this.firstListId=void 0,this.displayItemNum=void 0,this._updateDone=!0,this._updateCounter=void 0,this._actualNumItems=void 0,this._cyclicNum=void 0,this._cyclicPos1=void 0,this._cyclicPos2=void 0,i(this,"_numItems",ut,this),this._inited=!1,this._scrollView=void 0,this._layout=void 0,this._resizeMode=void 0,this._topGap=void 0,this._rightGap=void 0,this._bottomGap=void 0,this._leftGap=void 0,this._columnGap=void 0,this._lineGap=void 0,this._colLineNum=void 0,this._lastDisplayData=void 0,this.displayData=void 0,this._pool=void 0,this._itemTmp=void 0,this._itemTmpUt=void 0,this._needUpdateWidget=!1,this._itemSize=void 0,this._sizeType=void 0,this._customSize=void 0,this.frameCount=void 0,this._aniDelRuning=!1,this._aniDelCB=void 0,this._aniDelItem=void 0,this._aniDelBeforePos=void 0,this._aniDelBeforeScale=void 0,this.viewTop=void 0,this.viewRight=void 0,this.viewBottom=void 0,this.viewLeft=void 0,this._doneAfterUpdate=!1,this.elasticTop=void 0,this.elasticRight=void 0,this.elasticBottom=void 0,this.elasticLeft=void 0,this.scrollToListId=void 0,this.adhering=!1,this._adheringBarrier=!1,this.nearestListId=void 0,this.curPageNum=0,this._beganPos=void 0,this._scrollPos=void 0,this._curScrollIsTouch=void 0,this._scrollToListId=void 0,this._scrollToEndTime=void 0,this._scrollToSo=void 0,this._lack=void 0,this._allItemSize=void 0,this._allItemSizeNoEdge=void 0,this._scrollItem=void 0,this._thisNodeUt=void 0,this.onScrollEnded=void 0,this.onScrollToped=void 0}set slideMode(t){this._slideMode=t}get slideMode(){return this._slideMode}set virtual(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}get virtual(){return this._virtual}set updateRate(t){t>=0&&t<=6&&(this._updateRate=t)}get updateRate(){return this._updateRate}set selectedId(t){let e,i=this;switch(i.selectedMode){case vt.SINGLE:{if(!i.repeatEventSingle&&t==i._selectedId)return;let s;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(s=e.getComponent(z),s.selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){let t=i.getItemByListId(i._lastSelectedId);t&&(t.getComponent(z).selected=!1)}i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break}case vt.MULT:{if(e=i.getItemByListId(t),!e)return;let s=e.getComponent(z);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;let l=!s.selected;s.selected=l;let o=i.multSelected.indexOf(t);l&&o<0?i.multSelected.push(t):!l&&o>=0&&i.multSelected.splice(o,1),i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,l);break}}}get selectedId(){return this._selectedId}set numItems(t){let e=this;if(e.checkInited(!1))if(null==t||t<0)console.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=ft.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);let t=e.content.getComponent(m);if(t&&(t.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){let t=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum;for(let i=0;i<t;i++)e._createOrUpdateItem2(i);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(let t=0;t<e._numItems;t++)e._createOrUpdateItem2(t);e.displayItemNum=e._numItems}}}get numItems(){return this._actualNumItems}get scrollView(){return this._scrollView}onLoad(){this._init()}onDestroy(){let t=this;p(t._itemTmp)&&t._itemTmp.destroy(),p(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()}onEnable(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))}onDisable(){this._unregisterEvent()}_registerEvent(){let t=this;t.node.on(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.on("touch-up",t._onTouchUp,t),t.node.on(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.on("scroll-began",t._onScrollBegan,t),t.node.on("scroll-ended",t._onScrollEnded,t),t.node.on("scrolling",t._onScrolling,t),t.node.on(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_unregisterEvent(){let t=this;t.node.off(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.off("touch-up",t._onTouchUp,t),t.node.off(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.off("scroll-began",t._onScrollBegan,t),t.node.off("scroll-ended",t._onScrollEnded,t),t.node.off("scrolling",t._onScrolling,t),t.node.off(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_init(){let t=this;if(!t._inited)if(t._thisNodeUt=t.node.getComponent(g),t._scrollView=t.node.getComponent(l),t.content=t._scrollView.content,t._contentUt=t.content.getComponent(g),t.content){switch(t._layout=t.content.getComponent(m),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(I(t.templateType==Tt.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=ft.ADHERING&&t._slideMode!=ft.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new y,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case m.Type.HORIZONTAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case m.Type.VERTICAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.Type.GRID:switch(t._startAxis){case m.AxisDirection.HORIZONTAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.AxisDirection.VERTICAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")}_processAutoScrolling(t){const e=1e-4,i=new S;let s=this._scrollView;const o=s._isNecessaryAutoScrollBrake(),n=o?.05:1;s._autoScrollAccumulatedTime+=t*(1/n);let a=Math.min(1,s._autoScrollAccumulatedTime/s._autoScrollTotalTime);var h;s._autoScrollAttenuate&&(h=a,a=(h-=1)*h*h*h*h+1);const r=s._autoScrollTargetDelta.clone();r.multiplyScalar(a);const c=s._autoScrollStartPosition.clone();c.add(r);let _=Math.abs(a-1)<=e;if(Math.abs(a-1)<=s.getScrollEndedEventTiming()&&!s._isScrollEndedWithThresholdEventFired&&(s._dispatchEvent(l.EventType.SCROLL_ENG_WITH_THRESHOLD),s._isScrollEndedWithThresholdEventFired=!0),s.elastic){const t=c.clone();t.subtract(s._autoScrollBrakingStartPosition),o&&t.multiplyScalar(n),c.set(s._autoScrollBrakingStartPosition),c.add(t)}else{const t=c.clone();t.subtract(s._getContentPosition());const l=s._getHowMuchOutOfBoundary(t);l.equals(i,e)||(c.add(l),_=!0)}_&&(s._autoScrolling=!1);const d=new S(c);d.subtract(s._getContentPosition()),s._clampDelta(d),s._moveContent(d,_),s._dispatchEvent(l.EventType.SCROLLING),s._autoScrolling||(s._isBouncing=!1,s._scrolling=!1,s._dispatchEvent(l.EventType.SCROLL_ENDED))}setTemplateItem(t){if(!t)return;let e=this;if(e._itemTmp=t,e._itemTmpUt=t.getComponent(g),e._resizeMode==m.ResizeMode.CHILDREN)e._itemSize=e._layout.cellSize;else{let i=t.getComponent(g);e._itemSize=new T(i.width,i.height)}let i=t.getComponent(z),s=!1;switch(i||(s=!0),s&&(e.selectedMode=vt.NONE),i=t.getComponent(f),i&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==vt.MULT&&(e.multSelected=[]),e._align){case m.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case m.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case m.Type.GRID:switch(e._startAxis){case m.AxisDirection.HORIZONTAL:let t=e._contentUt.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((t+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case m.AxisDirection.VERTICAL:let i=e._contentUt.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((i+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}checkInited(t=!0){return!!this._inited||(t&&console.error("List initialization not completed!"),!1)}_resizeContent(){let t,e=this;switch(e._align){case m.Type.HORIZONTAL:if(e._customSize){let i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case m.Type.VERTICAL:if(e._customSize){let i=e._getFixedSize(null);t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case m.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case m.AxisDirection.HORIZONTAL:let i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case m.AxisDirection.VERTICAL:let s=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*s+e._columnGap*(s-1)+e._rightGap}}let i=e.content.getComponent(m);if(i&&(i.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){let t=e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width;e._cyclicPos1=0,t-=e._cyclicPos1,e._cyclicNum=Math.ceil(t/e._allItemSizeNoEdge)+1;let i=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+i,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+i*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=i*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width);let s=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width)-s:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e._contentUt.height=l:e._contentUt.width=l}_onScrolling(t=null){if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)return void this.frameCount--;if(this.frameCount=this._updateRate,this._aniDelRuning)return;if(this.cyclic){let t=this.content.getPosition();t=this._sizeType?t.y:t.x;let e=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?new S(0,e,0):new S(e,0,0),s=this.content.getPosition();switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(s.set(-this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(-this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:t<this._cyclicPos1?(s.set(this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 3:t<this._cyclicPos1?(s.set(s.x,this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(s.x,this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 4:t>-this._cyclicPos1?(s.set(s.x,-this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(s.x,-this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}let e,i,s,l;if(this._calcViewPos(),this._sizeType?(e=this.viewTop,s=this.viewBottom):(i=this.viewRight,l=this.viewLeft),this._virtual){let t;this.displayData=[];let o=0,n=this._numItems-1;if(this._customSize){let a=!1;for(;o<=n&&!a;o++)switch(t=this._calcItemPos(o),this._align){case m.Type.HORIZONTAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.VERTICAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.GRID:switch(this._startAxis){case m.AxisDirection.HORIZONTAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.AxisDirection.VERTICAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0)}}}else{let t=this._itemSize.width+this._columnGap,a=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:o=(l-this._leftGap)/t,n=(i-this._leftGap)/t;break;case 2:o=(-i-this._rightGap)/t,n=(-l-this._rightGap)/t;break;case 3:o=(-e-this._topGap)/a,n=(-s-this._topGap)/a;break;case 4:o=(s-this._bottomGap)/a,n=(e-this._bottomGap)/a}for(o=Math.floor(o)*this._colLineNum,n=Math.ceil(n)*this._colLineNum,n--,o<0&&(o=0),n>=this._numItems&&(n=this._numItems-1);o<=n;o++)this.displayData.push(this._calcItemPos(o))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;let a=this._lastDisplayData.length,h=this.displayItemNum!=a;if(h&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(((t,e)=>t-e)),h=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[a-1]),this._forceUpdate||h)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(let t=0;t<this.displayItemNum;t++)this._createOrUpdateItem(this.displayData[t]);this._forceUpdate=!1}this._calcNearestItem()}}_calcViewPos(){let t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this._thisNodeUt.width,this.elasticRight=this.viewRight>this._contentUt.width?Math.abs(this.viewRight-this._contentUt.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this._thisNodeUt.width,this.elasticLeft=this.viewLeft<-this._contentUt.width?Math.abs(this.viewLeft+this._contentUt.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this._thisNodeUt.height,this.elasticBottom=this.viewBottom<-this._contentUt.height?Math.abs(this.viewBottom+this._contentUt.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this._thisNodeUt.height,this.elasticTop=this.viewTop>this._contentUt.height?Math.abs(this.viewTop-this._contentUt.height):0,this.viewTop-=this.elasticTop}}_calcItemPos(t){let e,i,s,l,o,n,a,h;switch(this._align){case m.Type.HORIZONTAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){let i=this._getFixedSize(t);o=this._leftGap+(this._itemSize.width+this._columnGap)*(t-i.count)+(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else o=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){o-=this._leftGap,o+=this._contentUt.width/2-this._allItemSizeNoEdge/2}return n=o+e,{id:t,left:o,right:n,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y};case m.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){let i=this._getFixedSize(t);n=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-i.count)-(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else n=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){n+=this._rightGap,n-=this._contentUt.width/2-this._allItemSizeNoEdge/2}return o=n-e,{id:t,right:n,left:o,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y}}break;case m.Type.VERTICAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){let e=this._getFixedSize(t);s=-this._topGap-(this._itemSize.height+this._lineGap)*(t-e.count)-(e.val+this._lineGap*e.count);let l=this._customSize[t];i=l>0?l:this._itemSize.height}else s=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){s+=this._topGap,s-=this._contentUt.height/2-this._allItemSizeNoEdge/2}return l=s-i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i};case m.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){let e=this._getFixedSize(t);l=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-e.count)+(e.val+this._lineGap*e.count);let s=this._customSize[t];i=s>0?s:this._itemSize.height}else l=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){l-=this._bottomGap,l+=this._contentUt.height/2-this._allItemSizeNoEdge/2}return s=l+i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i}}case m.Type.GRID:{let e=Math.floor(t/this._colLineNum);switch(this._startAxis){case m.AxisDirection.HORIZONTAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:s=-this._topGap-(this._itemSize.height+this._lineGap)*e,l=s-this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:l=this._bottomGap+(this._itemSize.height+this._lineGap)*e,s=l+this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmpUt.anchorX)*this._itemSize.width,a-=(1-this._contentUt.anchorX)*this._contentUt.width,a*=-1}return{id:t,top:s,bottom:l,x:a,y:h};case m.AxisDirection.VERTICAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:o=this._leftGap+(this._itemSize.width+this._columnGap)*e,n=o+this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:n=-this._rightGap-(this._itemSize.width+this._columnGap)*e,o=n-this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a+=(1-this._contentUt.anchorX)*this._contentUt.width}switch(h=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:h-=(1-this._itemTmpUt.anchorY)*this._itemSize.height,h+=(1-this._contentUt.anchorY)*this._contentUt.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:h-=this._itemTmpUt.anchorY*this._itemSize.height,h+=this._contentUt.anchorY*this._contentUt.height,h*=-1}return{id:t,left:o,right:n,x:a,y:h}}break}}}_calcExistItemPos(t){let e=this.getItemByListId(t);if(!e)return null;let i=e.getComponent(g),s=e.getPosition(),l={id:t,x:s.x,y:s.y};return this._sizeType?(l.top=s.y+i.height*(1-i.anchorY),l.bottom=s.y-i.height*i.anchorY):(l.left=s.x-i.width*i.anchorX,l.right=s.x+i.width*(1-i.anchorX)),l}getItemPos(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)}_getFixedSize(t){if(!this._customSize)return null;null==t&&(t=this._numItems);let e=0,i=0;for(let s in this._customSize)parseInt(s)<t&&(e+=this._customSize[s],i++);return{val:e,count:i}}_onScrollBegan(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft}_onScrollEnded(){let t=this;t._curScrollIsTouch=!1;const e=t._scrollView.getScrollOffset(),i=t._scrollView.getMaxScrollOffset();if(t._sizeType?e.y<=0&&this.onScrollToped&&this.onScrollToped():e.x<=0&&this.onScrollToped&&this.onScrollToped(),t._sizeType?e.y>=i.y&&this.onScrollEnded&&this.onScrollEnded():e.x>=i.x&&this.onScrollEnded&&this.onScrollEnded(),null!=t.scrollToListId){let e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&v(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=ft.ADHERING||t.adhering?t._slideMode==ft.PAGE&&(null!=t._beganPos&&t._curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()}_onTouchStart(t,e){if(this._scrollView._hasNestedViewGroup(t,e))return;if(this._curScrollIsTouch=!0,!(t.eventPhase===Event.AT_TARGET&&t.target===this.node)){let e=t.target;for(;null==e._listId&&e.parent;)e=e.parent;this._scrollItem=null!=e._listId?e:t.target}}_onTouchUp(){let t=this;t._scrollPos=null,t._slideMode==ft.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==ft.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null}_onTouchCancelled(t,e){let i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==ft.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==ft.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)}_onSizeChanged(){this.checkInited(!1)&&this._onScrolling()}_onItemAdaptive(t){let e=t.getComponent(g);if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});let i=this._sizeType?e.height:e.width;this._customSize[t._listId]!=i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}}_pageAdhere(){let t=this;if(!t.cyclic&&(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0))return;let e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){let i=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(i):t.nextPage(i);break;case 2:case 3:t._beganPos<e?t.prePage(i):t.nextPage(i)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}adhere(){let t=this;if(!t.checkInited())return;if(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)return;t.adhering=!0,t._calcNearestItem();let e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width);t.scrollTo(t.nearestListId,.7,e)}update(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){let t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++){let t=this.displayData[e];t&&this._createOrUpdateItem(t)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==ft.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){let t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==ft.PAGE&&(this.curPageNum=this.nearestListId)}_createOrUpdateItem(t){let e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new S(t.x,t.y,0)),this._resetItemSize(e),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{let i=this._pool.size()>0;if(e=i?this._pool.get():I(this._itemTmp),i&&p(e)||(e=I(this._itemTmp),i=!1),e._listId!=t.id){e._listId=t.id,e.getComponent(g).setContentSize(this._itemSize)}if(e.setPosition(new S(t.x,t.y,0)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){let t=e.getComponent(f);t&&t.updateAlignment()}e.setSiblingIndex(this.content.children.length-1);let s=e.getComponent(z);e.listItem=s,s&&(s.listId=t.id,s.list=this,s._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)}_createOrUpdateItem2(t){let e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)):(i=I(this._itemTmp),i._listId=t,this.content.addChild(i),e=i.getComponent(z),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)}_updateListItem(t){if(t&&this.selectedMode>vt.NONE){let e=t.node;switch(this.selectedMode){case vt.SINGLE:t.selected=this.selectedId==e._listId;break;case vt.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}}_resetItemSize(t){}_updateItemPos(t){let e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)}setMultSelected(t,e){let i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{let s,l;if(e)for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l<0&&i.multSelected.push(s);else for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l>=0&&i.multSelected.splice(l,1)}i._forceUpdate=!0,i._onScrolling()}}getMultSelected(){return this.multSelected}hasMultSelected(t){return this.multSelected&&this.multSelected.indexOf(t)>=0}updateItem(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(let e=0,i=t.length;e<i;e++){let i=t[e],s=this.getItemByListId(i);s&&r.emitEvents([this.renderEvent],s,i%this._actualNumItems)}}}updateAll(){this.checkInited()&&(this.numItems=this.numItems)}getItemByListId(t){if(this.content)for(let e=this.content.children.length-1;e>=0;e--){let i=this.content.children[e];if(i._listId==t)return i}}_getOutsideItem(){let t,e=[];for(let i=this.content.children.length-1;i>=0;i--)t=this.content.children[i],this.displayData.find((e=>e.id==t._listId))||e.push(t);return e}_delRedundantItem(){if(this._virtual){let t=this._getOutsideItem();for(let e=t.length-1;e>=0;e--){let i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(let t=this._lastDisplayData.length-1;t>=0;t--)if(this._lastDisplayData[t]==i._listId){this._lastDisplayData.splice(t,1);break}}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1])}_delSingleItem(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null}aniDelItem(t,e,i){let s=this;if(!s.checkInited()||s.cyclic||!s._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(s._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");let l,o=s.getItemByListId(t);if(!o)return void e(t);l=o.getComponent(z),s._aniDelRuning=!0,s._aniDelCB=e,s._aniDelItem=o,s._aniDelBeforePos=o.position,s._aniDelBeforeScale=o.scale;let n=s.displayData[s.displayData.length-1].id,a=l.selected;l.showAni(i,(()=>{let i;if(n<s._numItems-2&&(i=n+1),null!=i){let t=s._calcItemPos(i);s.displayData.push(t),s._virtual?s._createOrUpdateItem(t):s._createOrUpdateItem2(i)}else s._numItems--;if(s.selectedMode==vt.SINGLE)a?s._selectedId=-1:s._selectedId-1>=0&&s._selectedId--;else if(s.selectedMode==vt.MULT&&s.multSelected.length){let e=s.multSelected.indexOf(t);e>=0&&s.multSelected.splice(e,1);for(let e=s.multSelected.length-1;e>=0;e--){s.multSelected[e]>=t&&s.multSelected[e]--}}if(s._customSize){s._customSize[t]&&delete s._customSize[t];let e,i={};for(let l in s._customSize){e=s._customSize[l];let o=parseInt(l);i[o-(o>=t?1:0)]=e}s._customSize=i}let l,h;for(let a=null!=i?i:n;a>=t+1;a--)if(o=s.getItemByListId(a),o){let i=s._calcItemPos(a-1);l=v(o).to(.2333,{position:new S(i.x,i.y,0)}),a<=t+1&&(h=!0,l.call((()=>{s._aniDelRuning=!1,e(t),delete s._aniDelCB}))),l.start()}h||(s._aniDelRuning=!1,e(t),s._aniDelCB=null)}),!0)}scrollTo(t,e=.5,i=null,s=!1){let l=this;if(!l.checkInited(!1))return;null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=l._numItems&&(t=l._numItems-1),!l._virtual&&l._layout&&l._layout.enabled&&l._layout.updateLayout();let o,n,a=l.getItemPos(t);if(!a)return w;switch(l._alignCalcType){case 1:o=a.left,o-=null!=i?l._thisNodeUt.width*i:l._leftGap,a=new S(o,0,0);break;case 2:o=a.right-l._thisNodeUt.width,o+=null!=i?l._thisNodeUt.width*i:l._rightGap,a=new S(o+l._contentUt.width,0,0);break;case 3:n=a.top,n+=null!=i?l._thisNodeUt.height*i:l._topGap,a=new S(0,-n,0);break;case 4:n=a.bottom+l._thisNodeUt.height,n-=null!=i?l._thisNodeUt.height*i:l._bottomGap,a=new S(0,-n+l._contentUt.height,0)}let h=l.content.getPosition();h=Math.abs(l._sizeType?h.y:h.x);let r=l._sizeType?a.y:a.x;Math.abs((null!=l._scrollPos?l._scrollPos:h)-r)>.5&&(l._scrollView.scrollToOffset(a,e),l._scrollToListId=t,l._scrollToEndTime=(new Date).getTime()/1e3+e,l._scrollToSo=l.scheduleOnce((()=>{if(l._adheringBarrier||(l.adhering=l._adheringBarrier=!1),l._scrollPos=l._scrollToListId=l._scrollToEndTime=l._scrollToSo=null,s){let e=l.getItemByListId(t);e&&v(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}}),e+.1),e<=0&&l._onScrolling())}_calcNearestItem(){let t,e,i,s,l,o,n=this;n.nearestListId=null,n._virtual&&n._calcViewPos(),i=n.viewTop,s=n.viewRight,l=n.viewBottom,o=n.viewLeft;let a=!1;for(let h=0;h<n.content.children.length&&!a;h+=n._colLineNum)if(t=n._virtual?n.displayData[h]:n._calcExistItemPos(h),t)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:t.right>=o&&(n.nearestListId=t.id,o>e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 2:t.left<=s&&(n.nearestListId=t.id,s<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 3:t.bottom<=i&&(n.nearestListId=t.id,i<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 4:t.top>=l&&(n.nearestListId=t.id,l>e&&(n.nearestListId+=n._colLineNum),a=!0)}if(t=n._virtual?n.displayData[n.displayItemNum-1]:n._calcExistItemPos(n._numItems-1),t&&t.id==n._numItems-1)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:s>e&&(n.nearestListId=t.id);break;case 2:o<e&&(n.nearestListId=t.id);break;case 3:l<e&&(n.nearestListId=t.id);break;case 4:i>e&&(n.nearestListId=t.id)}}prePage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum-1,t)}nextPage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum+1,t)}skipPage(t,e){let i=this;if(i.checkInited())return i._slideMode!=ft.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&r.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))}calcCustomSize(t){let e=this;if(!e.checkInited())return;if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};let i=I(e._itemTmp),s=i.getComponent(g);e.content.addChild(i);for(let l=0;l<t;l++)r.emitEvents([e.renderEvent],i,l),s.height==e._itemSize.height&&s.width==e._itemSize.width||(e._customSize[l]=e._sizeType?s.height:s.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}}).prototype,"templateType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Tt.NODE}}),Q=e(J.prototype,"tmpNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(J.prototype,"tmpPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(J.prototype,"_slideMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ft.NORMAL}}),e(J.prototype,"slideMode",[O],Object.getOwnPropertyDescriptor(J.prototype,"slideMode"),J.prototype),et=e(J.prototype,"pageDistance",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),it=e(J.prototype,"pageChangeEvent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),st=e(J.prototype,"_virtual",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(J.prototype,"virtual",[B],Object.getOwnPropertyDescriptor(J.prototype,"virtual"),J.prototype),lt=e(J.prototype,"cyclic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=e(J.prototype,"lackCenter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=e(J.prototype,"lackSlide",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=e(J.prototype,"_updateRate",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(J.prototype,"updateRate",[H],Object.getOwnPropertyDescriptor(J.prototype,"updateRate"),J.prototype),ht=e(J.prototype,"frameByFrameRenderNum",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rt=e(J.prototype,"renderEvent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),ct=e(J.prototype,"selectedMode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vt.NONE}}),_t=e(J.prototype,"selectedEvent",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),dt=e(J.prototype,"repeatEventSingle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ut=e(J.prototype,"_numItems",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=J))||q)||q)||q)||q)||q));s._RF.pop()}}}));

System.register("chunks:///_virtual/List2.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f4d36IVkDZEFYGJyOy6wiZw","List",void 0);e("List",class{constructor(e=!0){this.element=void 0,this.only=!1,this.count=0,this.only=e,this.element=[]}push(e){if(this.only){if(this.element.indexOf(e)>=0)return!1}return this.element.push(e),this.count=this.element.length,!0}unshift(e){if(this.only){if(this.element.indexOf(e)>=0)return!1}return this.element.unshift(e),this.count=this.element.length,!0}pop(){if(this.element.length>0){const e=this.element.pop();return this.count=this.element.length,e}return null}shift(){if(this.element.length>0){const e=this.element.shift();return this.count=this.element.length,e}return null}removeAt(e){if(e>=this.element.length)throw new Error("删除索引超出范围！");const t=this.element[e];return this.element.splice(e,1),this.count=this.element.length,t}remove(e){let t=this.element.indexOf(e);if(t<0)throw new Error("要删除的内容不在列表中！"+e);this.element[t];this.element.splice(t,1),this.count=this.element.length}clear(){this.count=0,this.element.length=0}has(e){return this.find(e)>=0}find(e){return this.element.indexOf(e)}findIndex(e){return this.element.findIndex(e)}get(e){if(e>=this.element.length)throw new Error("超出索引范围:"+e+"/"+this.element.length);return this.element[e]}get elements(){return this.element}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,i,n,s,o,l,r,a,c,d,h,p,u,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Sprite,o=e.Node,l=e.Enum,r=e.SpriteFrame,a=e._decorator,c=e.Component,d=e.Button,h=e.EventHandler,p=e.UITransform,u=e.tween,m=e.Vec3},function(e){b=e.DEV}],execute:function(){var g,f,v,y,_,C,w,S,E,F,I,N,z,T,k,D,H;n._RF.push({},"850b3xYLj1Ef5JlQ4X/4ZZH","ListItem",void 0);const{ccclass:L,property:M,disallowMultiple:G,menu:O,executionOrder:R}=a;var W=function(e){return e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH",e}(W||{});e("default",(g=G(),f=O("List Item"),v=R(-5001),y=M({type:s,tooltip:b}),_=M({type:o,tooltip:b}),C=M({type:l(W),tooltip:b}),w=M({type:o,tooltip:b,visible(){return this.selectedMode>W.NONE}}),S=M({type:r,tooltip:b,visible(){return this.selectedMode==W.SWITCH}}),E=M({tooltip:b}),L(F=g(F=f(F=v((N=t((I=class extends c{constructor(...e){super(...e),i(this,"icon",N,this),i(this,"title",z,this),i(this,"selectedMode",T,this),i(this,"selectedFlag",k,this),i(this,"selectedSpriteFrame",D,this),this._unselectedSpriteFrame=null,i(this,"adaptiveSize",H,this),this._selected=!1,this._btnCom=void 0,this.list=void 0,this._eventReg=!1,this.listId=void 0}set selected(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case W.TOGGLE:this.selectedFlag.active=e;break;case W.SWITCH:let t=this.selectedFlag.getComponent(s);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}get selected(){return this._selected}get btnCom(){return this._btnCom||(this._btnCom=this.node.getComponent(d)),this._btnCom}onLoad(){if(this.selectedMode==W.SWITCH){let e=this.selectedFlag.getComponent(s);this._unselectedSpriteFrame=e.spriteFrame}}onDestroy(){this.node.off(o.EventType.SIZE_CHANGED,this._onSizeChange,this)}_registerEvent(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(o.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)}_onSizeChange(){this.list._onItemAdaptive(this.node)}createEvt(e,t,i=null){if(!e.isValid)return;e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");let n=new h;return n.target=i||e.node,n.component=e.comName,n.handler=t,n}showAni(e,t,i){let n,s=this,o=s.node.getComponent(p);switch(e){case 0:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,2*o.height)});break;case 1:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(2*o.width,0)});break;case 2:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,-2*o.height)});break;case 3:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(-2*o.width,0)});break;default:n=u(s.node).to(.3,{scale:new m(.1,.1)})}(t||i)&&n.call((()=>{if(i){s.list._delSingleItem(s.node);for(let e=s.list.displayData.length-1;e>=0;e--)if(s.list.displayData[e].id==s.listId){s.list.displayData.splice(e,1);break}}t()})),n.start()}onClickThis(){this.list.selectedId=this.listId}}).prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(I.prototype,"selectedMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.NONE}}),k=t(I.prototype,"selectedFlag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"selectedSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"adaptiveSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=I))||F)||F)||F)||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,r,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){e=t.cclegacy,n=t.Node,r=t._decorator,a=t.Component}],execute:function(){var c,s,l,d,u;e._RF.push({},"87032/P3TtGkJ/kV6yRChPT","LoadingIndicator",void 0);const{ccclass:g,property:p}=r;t("LoadingIndicator",(c=g("LoadingIndicator"),s=p(n),c((u=o((d=class extends a{constructor(...t){super(...t),i(this,"loading",u,this),this.loading_rotate=0}update(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)}}).prototype,"loading",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=d))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingViewComp.ts",["cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts","./UIConfig.ts"],(function(t){var s,a,e,o,i,n,r;return{setters:[function(t){s=t.cclegacy,a=t.sys,e=t._decorator},function(t){o=t.oops},function(t){i=t.ecs},function(t){n=t.CCVMParentComp},function(t){r=t.UIID}],execute:function(){var d;s._RF.push({},"92429ykTnxFCrcGyW58JWjj","LoadingViewComp",void 0);const{ccclass:g,property:l}=e;t("LoadingViewComp",g("LoadingViewComp")(d=i.register("LoadingView",!1)(d=class t extends n{constructor(...t){super(...t),this.data={finished:0,total:0,progress:"0",prompt:""},this.progress=0}reset(){setTimeout((()=>{o.gui.remove(r.Loading),o.gui.open(r.Login)}),500)}start(){a.isNative||this.enter()}enter(){this.addEvent(),this.loadRes()}addEvent(){}onHandler(t,s){}async loadRes(){this.data.progress=0,await this.loadCustom(),this.loadGameRes()}loadCustom(){return this.data.prompt=o.language.getLangByID("loading_load_json"),new Promise((async(t,s)=>{t(null)}))}loadGameRes(){this.data.prompt=o.language.getLangByID("loading_load_game"),o.res.loadDir("ui",this.onProgressCallback.bind(this),this.onCompleteCallback.bind(this))}onProgressCallback(t,s,a){this.data.finished=t,this.data.total=s;var e=t/s;e>this.progress&&(this.progress=e,this.data.progress=(100*e).toFixed(2))}onCompleteCallback(){this.data.prompt=o.language.getLangByID("loading_load_player"),this.ent.remove(t)}})||d)||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var s,e;return{setters:[function(t){s=t.cclegacy,e=t.log}],execute:function(){s._RF.push({},"55c5eCDbiNGQrFiBTXmhOZz","Logger",void 0);let i=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({}));var n={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"};class l{static init(){this.tags=i.Net|i.Model|i.Business|i.View|i.Config|i.Trace}static setTags(t=null){t&&(this.tags=t)}static start(t="Time"){console.time(t)}static end(t="Time"){console.timeEnd(t)}static table(t,s){this.isOpen(i.Trace)&&console.table(t)}static trace(t,s="color:#ffffff;"){this.isOpen(i.Trace)&&(console.log||e).call(null,"%c%s%s",s,this.getDateString(),t)}static logNet(t,s){this.orange(i.Net,t,s)}static logModel(t,s){this.violet(i.Model,t,s)}static logBusiness(t,s){this.blue(i.Business,t,s)}static logView(t,s){this.green(i.View,t,s)}static logConfig(t,s){this.gray(i.Config,t,s)}static orange(t,s,e){this.print(t,s,"color:#ee7700;",e)}static violet(t,s,e){this.print(t,s,"color:Violet;",e)}static blue(t,s,e){this.print(t,s,"color:#3a5fcd;",e)}static green(t,s,e){this.print(t,s,"color:green;",e)}static gray(t,s,e){this.print(t,s,"color:gray;",e)}static isOpen(t){return 0!=(this.tags&t)}static print(t,s,i,l){if(!this.isOpen(t))return;const o=console.log||e,c=n[t];l?o.call(null,"%c%s%s%s:%s%o",i,this.getDateString(),"["+c+"]",this.stack(5),l,s):o.call(null,"%c%s%s%s:%o",i,this.getDateString(),"["+c+"]",this.stack(5),s)}static stack(t){const s=(new Error).stack.split("\n"),e=[];s.forEach((t=>{var s=(t=t.substring(7)).split(" ");s.length<2?e.push(s[0]):e.push({[s[0]]:s[1]})}));let i=[],n=[];if(t<e.length-1){let s;for(let l in e[t])if(n=l.split("."),2==n.length)i=n.concat();else{s=e[t][l];const n=s.lastIndexOf("/"),o=s.lastIndexOf(".");if(n>-1&&o>-1){const t=s.substring(n+1,o);i.push(t)}else i.push(s)}}return 1==i.length?"["+i[0]+".ts]":2==i.length?"["+i[0]+".ts->"+i[1]+"]":""}static getDateString(){let t=new Date,s=t.getHours().toString(),e="";return e+=(1==s.length?"0"+s:s)+":",s=t.getMinutes().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getSeconds().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getMilliseconds().toString(),1==s.length&&(s="00"+s),2==s.length&&(s="0"+s),e+=s,e="["+e+"]",e}}t("Logger",l),l.tags=0,l.init(),s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Oops.ts","./Root.ts","./AudioEffect.ts","./AudioEffectPool.ts","./AudioManager.ts","./AudioMusic.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./RandomManager.ts","./SeedRandom.ts","./StorageManager.ts","./StorageSecuritySimple.ts","./Timer.ts","./TimerManager.ts","./GameManager.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./ImageUtil.ts","./JsonUtil.ts","./List.ts","./ListItem.ts","./StringUtil.ts","./ViewUtil.ts","./AsyncQueue.ts","./Collection.ts","./List2.ts","./ECS.ts","./ECSComp.ts","./ECSEntity.ts","./ECSGroup.ts","./ECSMask.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./jsb_md5.ts","./JsonOb.ts","./StringFormat.ts","./VMBase.ts","./VMCompsEdit.ts","./VMCustom.ts","./VMEnv.ts","./VMEvent.ts","./VMLabel.ts","./VMModify.ts","./VMParent.ts","./VMProgress.ts","./VMState.ts","./ViewModel.ts","./BhvButtonGroup.ts","./BhvFrameIndex.ts","./BhvRollNumber.ts","./BhvSwitchPage.ts","./HttpRequest.ts","./WsFunc.ts","./WsNet.ts","./CCVMParentComp.ts","./GameComponent.ts","./Config.ts","./GameConfig.ts","./GameQueryConfig.ts","./Main.ts","./GameEvent.ts","./SingletonModuleComp.ts","./TipsManager.ts","./Initialize.ts","./InitRes.ts","./Hot.ts","./HotUpdate.ts","./LoadingViewComp.ts","./UIConfig.ts","./UILoginView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./Oops.ts","./Root.ts","./ECS.ts","./SingletonModuleComp.ts","./Initialize.ts","./UIConfig.ts"],(function(t){var n,i,s,c,e,o,a,r,u,l;return{setters:[function(t){n=t.cclegacy,i=t.macro,s=t.DynamicAtlasManager,c=t._decorator},function(t){e=t.oops},function(t){o=t.Root},function(t){a=t.ecs},function(t){r=t.smc},function(t){u=t.Initialize},function(t){l=t.UIConfigData}],execute:function(){var f;n._RF.push({},"0eec0s4qrZF7onPlYBrD+y+","Main",void 0);const{ccclass:g,property:m}=c;i.CLEANUP_IMAGE_CACHE=!1,s.instance.enabled=!0,s.instance.maxFrameSize=512;t("Main",g("Main")(f=class extends o{start(){}run(){r.initialize=a.getEntity(u),e.gui.toast("热更新后新程序的提示")}initGui(){e.gui.init(l)}async initEcsSystem(){}})||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.warn,n=e.log}],execute:function(){t._RF.push({},"a401fY+wj9NsqOACoZ7Zy/R","MessageManager",void 0);class l{constructor(){this.event=void 0,this.listener=void 0,this.object=void 0}}e("MessageEventData",class{constructor(){this.events=new Map}on(e,t,s){let n=this.events.get(e);null==n&&(n=[],this.events.set(e,n));let o=new l;o.event=e,o.listener=t,o.object=s,n.push(o),i.on(e,t,s)}off(e){let t=this.events.get(e);if(t){for(let s of t)i.off(e,s.listener,s.object);this.events.delete(e)}}dispatchEvent(e,...t){i.dispatchEvent(e,...t)}clear(){const e=Array.from(this.events.keys());for(let t of e)this.off(t)}});class o{constructor(){this.events=new Map}on(e,t,n){if(!e||!t)return void s(`注册【${e}】事件的侦听器函数为空`);let o=this.events.get(e);null==o&&(o=[],this.events.set(e,o));let i=o.length;for(let l=0;l<i;l++){let i=o[l];i.listener==t&&i.object==n&&s(`名为【${e}】的事件重复注册侦听器`)}let c=new l;c.event=e,c.listener=t,c.object=n,o.push(c)}once(e,t,s){let n=(l,...o)=>{this.off(e,n,s),n=null,t.call(s,l,o)};this.on(e,n,s)}off(e,t,s){let l=this.events.get(e);if(!l)return void n(`名为【${e}】的事件不存在`);let o=l.length;for(let e=0;e<o;e++){let n=l[e];if(n.listener==t&&n.object==s){l.splice(e,1);break}}0==l.length&&this.events.delete(e)}dispatchEvent(e,...t){let s=this.events.get(e);if(null!=s){let n=s.concat(),l=n.length;for(let s=0;s<l;s++){let l=n[s];l.listener.call(l.object,e,...t)}}}}e("MessageManager",o);const i=e("message",new o);t._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(t){var e,n,i,o,a,l,r,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t.Animation,l=t._decorator,r=t.Component},function(t){s=t.LanguageLabel}],execute:function(){var c,u,p,h,b,d,f;i._RF.push({},"869d28WPglKeqL+pPCvqbkq","Notify",void 0);const{ccclass:m,property:y}=l;t("Notify",(c=m("Notify"),u=y(o),p=y(a),c((d=e((b=class extends r{constructor(...t){super(...t),n(this,"lab_content",d,this),n(this,"animation",f,this),this.onComplete=null}onLoad(){this.animation&&this.animation.on(a.EventType.FINISHED,this.onFinished,this)}onFinished(){this.node.destroy(),this.onComplete&&this.onComplete(),this.onComplete=null}toast(t,e){let n=this.lab_content.getComponent(s);e?(n.enabled=!0,n.dataID=t):(n.enabled=!1,this.lab_content.string=t)}}).prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(b.prototype,"animation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./ECS.ts","./Language.ts","./HttpRequest.ts","./Config.ts","./Logger.ts","./RandomManager.ts","./WsNet.ts"],(function(n){var e,t,o,s,i,a,g,c;return{setters:[function(n){e=n.cclegacy},function(n){t=n.ecs},function(n){o=n.LanguageManager},function(n){s=n.HttpRequest},function(n){i=n.Config},function(n){a=n.Logger},function(n){g=n.RandomManager},function(n){c=n.WsNet}],execute:function(){e._RF.push({},"b9aebX8irxH14Kw3q0OwQZ9","Oops",void 0);n("version","2.0.0.20241118");class u{}n("oops",u),u.log=a,u.config=new i,u.storage=void 0,u.res=void 0,u.message=void 0,u.random=g.instance,u.timer=void 0,u.audio=void 0,u.gui=void 0,u.game=void 0,u.language=new o,u.http=new s,u.ws=new c,u.ecs=new t.RootSystem,e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomManager.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"3e09eJBwfZBsLPqFszZLvMS","RandomManager",void 0);class e{constructor(){this.random=null}static get instance(){return null==this._instance&&(this._instance=new e,this._instance.setRandom(Math.random)),this._instance}setRandom(t){this.random=t}getRandom(){return this.random()}getRandomFloat(t=0,n=1){return this.getRandom()*(n-t)+t}getRandomInt(t,n,e=2){switch(t=Math.ceil(t),n=Math.floor(n),e){case 1:return Math.floor(this.getRandom()*(n-t))+t;case 2:return Math.floor(this.getRandom()*(n-t+1))+t;case 3:return Math.floor(this.getRandom()*(n-t-1))+t+1}return 0}getRandomByMinMaxList(t,n,e){var a=[];for(let s=0;s<e;s++)a.push(this.getRandomInt(t,n));return a}getRandomByObjectList(t,n){var e=t.slice(),a=[];for(let t=0;t<n;t++){let t=this.getRandomInt(0,e.length,1);a.push(e.splice(t,1)[0])}return a}getRandomBySumList(t,n){let e=n,a=0;const s=[];for(let n=0;n<t;n++)a=this.getRandomInt(0,e,3),n==t-1?a=e:e-=a,s.push(a);return s}}t("RandomManager",e),e._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(e){var s,r,t,l,a,n,o;return{setters:[function(e){s=e.cclegacy,r=e.assetManager,t=e.error,l=e.warn,a=e.Asset,n=e.js,o=e.resources}],execute:function(){s._RF.push({},"5ce0b8I5fhOgqEY8sacXNMP","ResLoader",void 0);class d{constructor(){this.defaultBundleName="resources",this.cdn=!1,this.bundles=new Map}get maxConcurrency(){return r.downloader.maxConcurrency}set maxConcurrency(e){r.downloader.maxConcurrency=e}get maxRequestsPerFrame(){return r.downloader.maxRequestsPerFrame}set maxRequestsPerFrame(e){r.downloader.maxRequestsPerFrame=e}get maxRetryCount(){return r.downloader.maxRetryCount}set maxRetryCount(e){r.downloader.maxRetryCount=e}get retryInterval(){return r.downloader.retryInterval}set retryInterval(e){r.downloader.retryInterval=e}init(e){this.cdn=e.enable;for(let s in e.packages)this.bundles.set(s,e.packages[s])}loadRemote(e,...s){let t=null,l=null;2==s.length?(t=s[0],l=s[1]):l=s[0],r.loadRemote(e,t,l)}loadBundle(e,s){return new Promise(((l,a)=>{r.loadBundle(e,{version:s},((e,s)=>{if(e)return t(e);l(s)}))}))}removeBundle(e){let s=r.bundles.get(e);s&&(s.releaseAll(),r.removeBundle(s))}preload(e,s,r,t,l){let a=null;"string"==typeof s||s instanceof Array?(a=this.parseLoadResArgs(s,r,t,l),a.bundle=e):(a=this.parseLoadResArgs(e,s,r,t),a.bundle=this.defaultBundleName),a.preload=!0,this.loadByArgs(a)}preloadAsync(e,s,r){return new Promise(((t,a)=>{this.preload(e,s,r,((e,s)=>{e&&l(e.message),t(s)}))}))}preloadDir(e,s,r,t,l){let a=null;"string"==typeof s?(a=this.parseLoadResArgs(s,r,t,l),a.bundle=e):(a=this.parseLoadResArgs(e,s,r,t),a.bundle=this.defaultBundleName),a.dir=a.paths,a.preload=!0,this.loadByArgs(a)}load(e,s,r,t,l){let a=null;"string"==typeof s||s instanceof Array?(a=this.parseLoadResArgs(s,r,t,l),a.bundle=e):(a=this.parseLoadResArgs(e,s,r,t),a.bundle=this.defaultBundleName),this.loadByArgs(a)}loadAsync(e,s,r){return new Promise(((t,a)=>{this.load(e,s,r,((e,s)=>{e&&l(e.message),t(s)}))}))}loadDir(e,s,r,t,l){let a=null;"string"==typeof s?(a=this.parseLoadResArgs(s,r,t,l),a.bundle=e):(a=this.parseLoadResArgs(e,s,r,t),a.bundle=this.defaultBundleName),a.dir=a.paths,this.loadByArgs(a)}release(e,s=this.defaultBundleName){const t=r.getBundle(s);if(t){const s=t.get(e);s&&this.releasePrefabtDepsRecursively(s)}}releaseDir(e,s=this.defaultBundleName){const t=r.getBundle(s);if(t){var l=t.getDirWithPath(e);l&&l.map((e=>{this.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=s&&r.removeBundle(t)}}releasePrefabtDepsRecursively(e){if(e instanceof a)e.decRef();else{const s=r.assets.get(e);s&&s.decRef()}}get(e,s,t=this.defaultBundleName){return r.getBundle(t).get(e,s)}parseLoadResArgs(e,s,r,t){let l=e,o=s,d=r,u=t;if(void 0===t){const e=n.isChildClassOf(s,a);r?(u=r,e&&(d=null)):void 0!==r||e||(u=s,d=null,o=null),void 0===r||e||(d=s,o=null)}return{paths:l,type:o,onProgress:d,onComplete:u}}loadByBundleAndArgs(e,s){s.dir?s.preload?e.preloadDir(s.paths,s.type,s.onProgress,s.onComplete):e.loadDir(s.paths,s.type,s.onProgress,s.onComplete):s.preload?e.preload(s.paths,s.type,s.onProgress,s.onComplete):e.load(s.paths,s.type,s.onProgress,s.onComplete)}async loadByArgs(e){if(e.bundle){let s=r.bundles.get(e.bundle);if(s)this.loadByBundleAndArgs(s,e);else{const r=this.cdn?this.bundles.get(e.bundle):"";s=await this.loadBundle(e.bundle,r),s&&this.loadByBundleAndArgs(s,e)}}else this.loadByBundleAndArgs(o,e)}dump(){r.assets.forEach(((e,s)=>{console.log(r.assets.get(s))})),console.log(`当前资源总数:${r.assets.count}`)}}e("ResLoader",d);e("resLoader",new d);s._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./GameQueryConfig.ts","./Oops.ts","./AudioManager.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./StorageManager.ts","./StorageSecuritySimple.ts","./TimerManager.ts","./GameManager.ts","./LayerManager.ts"],(function(e){var t,i,n,s,o,a,r,u,g,c,l,m,p,h,d,f,y,E,M,S,w,G,v,b,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,o=e._decorator,a=e.Component,r=e.director,u=e.JsonAsset,g=e.game,c=e.Game,l=e.sys,m=e.screen},function(e){p=e.GameConfig},function(e){h=e.GameQueryConfig},function(e){d=e.version,f=e.oops},function(e){y=e.AudioManager},function(e){E=e.EventMessage},function(e){M=e.message},function(e){S=e.resLoader},function(e){w=e.StorageManager},function(e){G=e.StorageSecuritySimple},function(e){v=e.TimerManager},function(e){b=e.GameManager},function(e){R=e.LayerManager}],execute:function(){var C,N,_,A,L;n._RF.push({},"2c835NTA6tGVLgPtGMBypkc","Root",void 0);const{property:T}=o;let O=!1;e("Root",(C=T({type:s,tooltip:"游戏层"}),N=T({type:s,tooltip:"界面层"}),A=t((_=class extends a{constructor(...e){super(...e),i(this,"game",A,this),i(this,"gui",L,this),this.persist=null}onLoad(){O||(O=!0,console.log(`Oops Framework v${d}`),this.enabled=!1,this.iniStart(),this.loadConfig().then())}async loadConfig(){this.persist=new s("OopsFrameworkPersistNode"),r.addPersistRootNode(this.persist),f.res=S;const e="config",t=await f.res.loadAsync(e,u);t?(f.config.query=new h,f.config.game=new p(t),f.res.defaultBundleName=f.config.game.bundleDefault,f.res.init(f.config.game.data.bundle),f.storage=new w,f.storage.init(new G),f.message=M,f.audio=this.persist.addComponent(y),f.audio.load(),f.timer=this.persist.addComponent(v),f.game=new b(this.game),f.gui=new R(this.gui),f.http.server=f.config.game.httpServer,f.http.timeout=f.config.game.httpTimeout,g.frameRate=f.config.game.frameRate,this.enabled=!0,this.init(),this.run(),f.res.release(e)):this.loadConfig().then()}update(e){f.ecs.execute(e)}iniStart(){}initGui(){}initEcsSystem(){}run(){}init(){this.initGui(),this.initEcsSystem(),f.ecs.init(),g.on(c.EVENT_SHOW,this.onShow,this),g.on(c.EVENT_HIDE,this.onHide,this),l.isMobile||(m.on("window-resize",(()=>{f.message.dispatchEvent(E.GAME_RESIZE)}),this),m.on("fullscreen-change",(()=>{f.message.dispatchEvent(E.GAME_FULL_SCREEN)}),this)),m.on("orientation-change",(()=>{f.message.dispatchEvent(E.GAME_ORIENTATION)}),this)}onShow(){r.resume(),g.resume()}onHide(){r.pause(),g.pause()}}).prototype,"game",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(_.prototype,"gui",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_));n._RF.pop()}}}));

System.register("chunks:///_virtual/SeedRandom.ts",["cc","./RandomManager.ts"],(function(t){var n,s;return{setters:[function(t){n=t.cclegacy},function(t){s=t.RandomManager}],execute:function(){n._RF.push({},"9b02bnNwwZEWq9Ft59BRCIB","SeedRandom",void 0);t("SeedRandom",class{get random(){return this.rm}constructor(t){this.rm=void 0,this.sr=void 0,this.sr=new Math.seedrandom(t),this.rm=new s,this.rm.setRandom(this.sr)}destroy(){this.rm=null,this.sr=null}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonModuleComp.ts",["cc","./ECS.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ecs}],execute:function(){var o;t._RF.push({},"c11472aPc1P0K2H9Nlk7mKo","SingletonModuleComp",void 0);let c=e("SingletonModuleComp",n.register("SingletonModule")(o=class extends n.Comp{constructor(...e){super(...e),this.initialize=null}reset(){}})||o);e("smc",n.getSingleton(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["cc","./env"],(function(e){var t,r,s;return{setters:[function(e){t=e.cclegacy,r=e.sys},function(e){s=e.PREVIEW}],execute:function(){t._RF.push({},"530900yO+VAiodALf0GRbXf","StorageManager",void 0);e("StorageManager",class{constructor(){this.id=null,this.iss=null}get encrypted(){return!s}init(e){this.iss=e}setUser(e){this.id=e}getUser(){return this.id}set(e,t){let s=this.getKey(e);if(null!=e){if(this.encrypted&&(s=this.iss.encryptKey(s)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error(`解析失败，str = ${t}`)}else"number"==typeof t&&(t+="");this.encrypted&&(t=this.iss.encrypt(t)),r.localStorage.setItem(s,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")}get(e,t=""){if(null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=this.iss.encryptKey(e));let s=r.localStorage.getItem(e);return null!=s&&""!==s&&this.encrypted&&(s=this.iss.decrypt(s)),null===s?t:s}getNumber(e,t=0){const r=this.get(e);return"0"==r?Number(r):Number(r)||t}getBoolean(e){return"true"===this.get(e).toLowerCase()}getJson(e,t){const r=this.get(e);return r&&JSON.parse(r)||t}remove(e){if(null==e)return void console.error("存储的key不能为空");let t=this.getKey(e);this.encrypted&&(t=this.iss.encryptKey(t)),r.localStorage.removeItem(t)}clear(){r.localStorage.clear()}getKey(e){return null==this.id||""==this.id?e:`${this.id}_${e}`}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/StorageSecuritySimple.ts",["cc","./Oops.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.oops}],execute:function(){t._RF.push({},"1e32dWm6g1PZ5OJAp316fOS","StorageSecuritySimple",void 0);e("StorageSecuritySimple",class{constructor(){this.secretkey=null;const e=r.config.game.localDataKey,t=r.config.game.localDataIv;this.secretkey=e+t}encrypt(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t}decrypt(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t}encryptKey(e){return this.encrypt(e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/StringFormat.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"85fe8Gc6h5Ava+JsdbBs8cR","StringFormat",void 0);t("StringFormatFunction",new class{deal(t,e){if(""===e)return t;let r=(e=e.toLowerCase().trim()).match(/^[a-z|A-Z]+/gi),i=e.match(/\d+$/gi),n="",s=0,a="";if(r&&(n=r[0]),i&&(s=parseInt(i[0])),"number"==typeof t)switch(n){case"int":a=this.int(t);break;case"fix":a=this.fix(t,s);break;case"kmbt":a=this.KMBT(t);break;case"per":a=this.per(t,s);break;case"sep":a=this.sep(t)}else{switch(n){case"limit":a=this.limit(t,s)}a=t}return a}sep(t){return Math.round(t).toString().replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,")}time_m(t){}time_s(t){}time_ms(t){}timeStamp(t){return new Date(t).toString()}per(t,e){return Math.round(100*t).toFixed(e)}int(t){return Math.round(t)}fix(t,e){return t.toFixed(e)}limit(t,e){return t.substring(0,e)}KMBT(t,e="en"){return this.compressUnit(t,[1e3,1e6,1e9,1e12],["","K","M","B","T"],2)}compressUnit(t,e,r,i=2){let n,s=e,a=r,c="";for(n=0;n<s.length;n++){if(t<s[n]){c=n>0?(t/s[n-1]).toFixed(i):t.toFixed(0);break}}return c+a[n]}});e._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"41efa4xk5JBH5o/RMYRnF58","StringUtil",void 0);t("StringUtil",class{static guid(){let t="";for(let r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t}static numberTotPermil(t){return t.toLocaleString()}static numberToThousand(t,r=2){const e=1e3,n=["","K","M","G"];if(t<e)return t.toString();{const i=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,i)).toFixed(r)+n[i]}}static numberToTenThousand(t,r=2){const e=1e4,n=["","万","亿","万亿"];if(t<e)return t.toString();{const i=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,i)).toFixed(r)+n[i]}}static stringToArray1(t){return""==t?[]:t.split(",")}static stringToArray2(t){return""==t?[]:t.split("|")}static stringToArray3(t){return""==t?[]:t.split(":")}static stringToArray4(t){return""==t?[]:t.split(";")}static sub(t,r,e=!1){const n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=r)return t;for(let i=Math.floor(r/2);i<t.length;i++)if(t.substr(0,i).replace(n,"mm").length>=r)return e?t.substr(0,i)+"...":t.substr(0,i);return t}static stringLen(t){let r=0,e=t.length,n=-1;for(let i=0;i<e;i++)n=t.charCodeAt(i),r+=n>=0&&n<=128?1:2;return r}static IsEmpty(t){return null==t||null==t||0==t.length}static substitute(t,...r){if(null==t)return"";let e,n=r.length;1==n&&r[0]instanceof Array?(e=r[0],n=e.length):e=r;for(let r=0;r<n;r++)t=t.replace(new RegExp("\\{"+r+"\\}","g"),e[r]);return t}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6021fct1uhJsImEuhdFWC0f","Timer",void 0);e("Timer",class{get elapsedTime(){return this._elapsedTime}get step(){return this._step}set step(e){this._step=e,this._elapsedTime=0}get progress(){return this._elapsedTime/this._step}constructor(e=0){this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}update(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,this.callback?.call(this),!0))}reset(){this._elapsedTime=0}stop(){this._elapsedTime=0,this.step=-1}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,s,r,n;return{setters:[function(e){t=e.cclegacy,i=e.Component,s=e.game},function(e){r=e.StringUtil},function(e){n=e.Timer}],execute:function(){t._RF.push({},"73600VLsIBLOKhOhd7td4P8","TimerManager",void 0);e("TimerManager",class extends i{constructor(...e){super(...e),this.times={},this.date_s=new Date,this.date_s_start=new Date,this.polymeric_s=0,this.date_c=new Date}update(e){for(let t in this.times){let i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}}onTimerComplete(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]}register(e,t,i,s){const m=new n;m.step=1;let o={};return o.id=r.guid(),o.timer=m,o.object=e,o.field=t,o.onSecond=i,o.onComplete=s,this.times[o.id]=o,o.id}unRegister(e){this.times[e]&&delete this.times[e]}setServerTime(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)}getServerTime(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s}getServerDate(){return this.date_s.setTime(this.getServerTime()),this.date_s}getClientTime(){return Date.now()}getClientDate(){return this.date_c.setTime(this.getClientTime()),this.date_c}getTime(){return s.totalTime}save(){for(let e in this.times)this.times[e].startTime=this.getTime()}load(){for(let e in this.times){let t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/TipsManager.ts",["cc","./Oops.ts","./UIConfig.ts"],(function(o){var e,n,t,c,m;return{setters:[function(o){e=o.cclegacy,n=o.tween,t=o.Vec3},function(o){c=o.oops},function(o){m=o.UIID}],execute:function(){e._RF.push({},"9748eriEcJOp6OSdnZ/qhs5","TipsManager",void 0);var r=o("tips",new class{test(o){let e={title:"common_prompt_title_sys",content:"common_prompt_content",okWord:"common_prompt_ok",cancelWord:"common_prompt_cancal",okFunc:()=>{console.log("okFunc")},cancelFunc:()=>{console.log("cancelFunc")},needCancel:!0};c.gui.open(m.Confirm,e,this.getPopCommonEffect())}alert(o,e,n,t){let l={title:n||"common_prompt_title_sys",content:o,okWord:t||"common_prompt_ok",okFunc:()=>{e&&e()},needCancel:!1};c.gui.open(m.Confirm,l,r.getPopCommonEffect())}confirm(o,e,n="common_prompt_ok"){let t={title:"common_prompt_title_sys",content:o,okWord:n,cancelWord:"common_prompt_cancal",okFunc:()=>{e&&e()},cancelFunc:()=>{},needCancel:!0};c.gui.open(m.Confirm,t,r.getPopCommonEffect())}getPopCommonEffect(o){let e={onAdded:(o,e)=>{o.setScale(.1,.1,.1),n(o).to(.2,{scale:new t(1,1,1)}).start()},onBeforeRemove:(o,e)=>{n(o).to(.2,{scale:new t(.1,.1,.1)}).call(((o,n)=>{e()})).start()}};if(o){if(o&&o.onAdded){let n=o.onAdded;o.onAdded=(o,t)=>{n(o,t),e.onAdded(o,t)}}if(o&&o.onBeforeRemove){let n=o.onBeforeRemove;o.onBeforeRemove=(o,t)=>{n(o,t),e.onBeforeRemove(o,t)}}return o}return e}});e._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc","./LayerManager.ts"],(function(e){var n,r;return{setters:[function(e){n=e.cclegacy},function(e){r=e.LayerType}],execute:function(){n._RF.push({},"7cc1c6mhI1JFbbSdiJ6Qark","UIConfig",void 0);let i=e("UIID",function(e){return e[e.Loading=1]="Loading",e[e.Alert=2]="Alert",e[e.Confirm=3]="Confirm",e[e.Login=4]="Login",e}({}));e("UIConfigData",{[i.Loading]:{layer:r.UI,prefab:"loading/prefab/loading",bundle:"resources"},[i.Alert]:{layer:r.Dialog,prefab:"common/prefab/alert",mask:!0},[i.Confirm]:{layer:r.Dialog,prefab:"common/prefab/confirm",mask:!0},[i.Login]:{layer:r.UI,prefab:"ui/uilogin/uiloginView"}});n._RF.pop()}}}));

System.register("chunks:///_virtual/UILoginView.ts",["cc"],(function(e){var t,n,c;return{setters:[function(e){t=e.cclegacy,n=e.Component,c=e._decorator}],execute:function(){var o;t._RF.push({},"d12d19enMlALaIMBYxkA743","UILoginView",void 0);const{ccclass:i,property:s}=c;e("UILoginView",i("UILoginView")(o=class extends n{start(){}update(e){}})||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/ViewModel.ts",["cc","./JsonOb.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.director},function(t){n=t.JsonOb}],execute:function(){e._RF.push({},"54f75k4X+RP0qaXOzrfZysL","ViewModel",void 0);const o="VC:";function r(t,e,i,n=""){let o=e.split(".");for(let r=0;r<o.length;r++){const s=o[r];if(s in t==!1){console.error("["+s+"] not find in "+n+"."+e);break}r==o.length-1?t[s]=i:t=t[s]}}function s(t,e,i,n=""){let o=e.split(".");for(let r=0;r<o.length;r++){const s=o[r];if(s in t==!1)return console.error("["+s+"] not find in "+n+"."+e),i;t=t[s]}return null==t&&(t=i),t}class a{constructor(t,e){this.$data=void 0,this._tag=null,this.active=!0,this.emitToRootPath=!1,new n(t,this._callback.bind(this)),this.$data=t,this._tag=e}_callback(t,e,n){if(1==this.active){let r=o+this._tag+"."+n.join(".");if(i.emit(r,t,e,[this._tag].concat(n)),this.emitToRootPath&&i.emit(o+this._tag,t,e,n),n.length>=2)for(let t=0;t<n.length-1;t++){n[t]}}}setValue(t,e){r(this.$data,t,e,this._tag)}getValue(t,e){return s(this.$data,t,e,this._tag)}}t("VM",new class{constructor(){this._mvs=new Map,this.setObjValue=r,this.getObjValue=s}add(t,e="global",i=!1){let n=new a(t,e),o=this._mvs.get(e);e.includes(".")?console.error("cant write . in tag:",e):o?console.error("already set VM tag:"+e):(n.emitToRootPath=i,this._mvs.set(e,n))}remove(t){this._mvs.delete(t)}get(t){return this._mvs.get(t)}addValue(t,e){let i=(t=t.trim()).split(".");i.length<2&&console.error("Cant find path:"+t);let n=this.get(i[0]);if(!n)return void console.error("Cant Set VM:"+i[0]);let o=i.slice(1).join(".");n.setValue(o,n.getValue(o)+e)}getValue(t,e){let i=(t=t.trim()).split(".");if(i.length<2)return void console.error("Get Value Cant find path:"+t);let n=this.get(i[0]);if(n)return n.getValue(i.slice(1).join("."),e);console.error("Cant Get VM:"+i[0])}setValue(t,e){let i=(t=t.trim()).split(".");if(i.length<2)return void console.error("Set Value Cant find path:"+t);let n=this.get(i[0]);n?n.setValue(i.slice(1).join("."),e):console.error("Cant Set VM:"+i[0])}bindPath(t,e,n,r){""!=(t=t.trim())?"*"!==t.split(".")[0]?i.on(o+t,e,n,r):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本"):console.error(n.node.name,"节点绑定的路径为空")}unbindPath(t,e,n){"*"!==(t=t.trim()).split(".")[0]?i.off(o+t,e,n):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本")}inactive(){this._mvs.forEach((t=>{t.active=!1}))}active(){this._mvs.forEach((t=>{t.active=!1}))}});e._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["cc","./ResLoader.ts"],(function(e){var t,n,a,o,r,i,c,l,s;return{setters:[function(e){t=e.cclegacy,n=e.UITransform,a=e.v3,o=e.Size,r=e.Prefab,i=e.instantiate,c=e.Animation,l=e.AnimationClip},function(e){s=e.resLoader}],execute:function(){t._RF.push({},"62d5duUpu9O1Jdb+XahXuY2","ViewUtil",void 0);class d{static nodeTreeInfoLite(e,t){let n=t||new Map,a=e.children;for(let e=0;e<a.length;e++){let t=a[e];t.name.indexOf(" ")<0&&n.set(t.name,t),d.nodeTreeInfoLite(t,n)}return n}static findNodes(e,t,n){let a=n||[],o=t.children;for(let t=0;t<o.length;t++){let n=o[t].name;e.test(n)&&a.push(o[t]),d.findNodes(e,o[t],a)}return a}static calculateASpaceToBSpacePos(e,t,a){const o=e.getComponent(n).convertToWorldSpaceAR(a);return t.getComponent(n).convertToNodeSpaceAR(o)}static calculateScreenPosToSpacePos(e,t){const o=e.getUILocation(),r=a(o.x,o.y);return t.getComponent(n).convertToNodeSpaceAR(r)}static uniformScale(e,t,n,a){const r=n/e,i=a/t;let c;return c=r<i?r:i,new o(Math.floor(e*c),Math.floor(t*c))}static createPrefabNode(e,t=s.defaultBundleName){const n=s.get(e,r,t);return n?i(n):null}static createPrefabNodeAsync(e,t=s.defaultBundleName){return new Promise((async(n,a)=>{const o=await s.loadAsync(t,e,r);o?n(i(o)):(console.error(`名为【${e}】的资源加载失败`),n(null))}))}static addNodeAnimation(e,t,n=!0,a=!1){if(!t||!t.isValid)return;let o=t.getComponent(c);null==o&&(o=t.addComponent(c));const r=s.get(e,l);if(r&&!(n&&o.getState(r.name)&&o.getState(r.name).isPlaying)){if(a)return o.defaultClip=r,void o.play();o.once(c.EventType.FINISHED,(()=>{o.defaultClip&&o.play()}),this),o.getState(r.name)||o.createState(r,r.name),o.play(r.name)}}}e("ViewUtil",d),t._RF.pop()}}}));

System.register("chunks:///_virtual/VMBase.ts",["cc","./ViewModel.ts","./VMEnv.ts"],(function(t){var e,h,i,n,a,s;return{setters:[function(t){e=t.cclegacy,h=t.Component,i=t.log,n=t._decorator},function(t){a=t.VM},function(t){s=t.VMEnv}],execute:function(){var o;e._RF.push({},"2f6f36IvUdPO7xynnVTPgzb","VMBase",void 0);const{ccclass:r,help:l}=n;t("VMBase",r(o=l("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037631&doc_id=2873565")(o=class extends h{constructor(...t){super(...t),this.VM=a,this.watchPath="",this.templateMode=!1,this.watchPathArr=[],this.templateValueArr=[]}onLoad(){if(s.editor)return;let t=this.watchPath.split(".");for(let e=1;e<t.length;e++){if("*"==t[e]){let h=this.node.parent.children.findIndex((t=>t===this.node));h<=0&&(h=0),t[e]=h.toString();break}}this.watchPath=t.join(".");let e=this.watchPathArr;if(e.length>=1)for(let t=0;t<e.length;t++){let h=e[t].split(".");for(let t=1;t<h.length;t++){if("*"==h[t]){let e=this.node.parent.children.findIndex((t=>t===this.node));e<=0&&(e=0),h[t]=e.toString();break}}this.watchPathArr[t]=h.join(".")}""==this.watchPath&&""==this.watchPathArr.join("")&&i("可能未设置路径的节点:",this.node.parent.name+"."+this.node.name)}onEnable(){s.editor||(this.templateMode?this.setMultPathEvent(!0):""!=this.watchPath&&this.VM.bindPath(this.watchPath,this.onValueChanged,this),this.onValueInit())}onDisable(){s.editor||(this.templateMode?this.setMultPathEvent(!1):""!=this.watchPath&&this.VM.unbindPath(this.watchPath,this.onValueChanged,this))}setMultPathEvent(t=!0){if(s.editor)return;let e=this.watchPathArr;for(let h=0;h<e.length;h++){const i=e[h];t?this.VM.bindPath(i,this.onValueChanged,this):this.VM.unbindPath(i,this.onValueChanged,this)}}onValueInit(){}onValueChanged(t,e,h){}})||o)||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMCompsEdit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var t,r,i,o,n,a,s,l,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.CCString,n=e.Enum,a=e.Node,s=e._decorator,l=e.Component,p=e.log},function(e){c=e.VMEnv}],execute:function(){var h,g,u,_,d,E,T,f,b,P,C,y,N,O,m,A,w,M,v,L,H,D,k;i._RF.push({},"2359eFXKF5HFYS74K7Y17/U","VMCompsEdit",void 0);const{ccclass:R,property:j,executeInEditMode:S,menu:V,help:z}=s;var F=function(e){return e[e.SEARCH_COMPONENT=0]="SEARCH_COMPONENT",e[e.ENABLE_COMPONENT=1]="ENABLE_COMPONENT",e[e.REPLACE_WATCH_PATH=2]="REPLACE_WATCH_PATH",e[e.DELETE_COMPONENT=3]="DELETE_COMPONENT",e}(F||{});e("default",(h=V("OopsFramework/Mvvm/Edit-Comps （快速组件操作）"),g=z("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037632&doc_id=2873565"),u=j({type:[o]}),_=j({type:n(F)}),d=j({tooltip:"勾选后,会自动查找 find list 中填写的组件",visible:function(){return this.actionType===F.SEARCH_COMPONENT}}),E=j({tooltip:"勾选后,会批量激活 find list 中填写的组件",visible:function(){return this.actionType===F.ENABLE_COMPONENT}}),T=j({tooltip:"勾选后,会批量关闭 find list 中填写的组件",visible:function(){return this.actionType===F.ENABLE_COMPONENT}}),f=j({tooltip:"允许删除节点的组件,确定需要移除请勾选,防止误操作",visible:function(){return this.actionType===F.DELETE_COMPONENT}}),b=j({tooltip:"勾选后,会批量删除 find list 中填写的组件",displayName:"[ X DELETE X ]",visible:function(){return this.allowDelete&&this.actionType===F.DELETE_COMPONENT}}),P=j({tooltip:"勾选后,会批量替换掉指定的路径",visible:function(){return this.actionType===F.REPLACE_WATCH_PATH}}),C=j({tooltip:"匹配的路径,匹配规则: 搜索开头为 game的路径",visible:function(){return this.actionType===F.REPLACE_WATCH_PATH}}),y=j({tooltip:"替换的路径,将匹配到的路径替换",visible:function(){return this.actionType===F.REPLACE_WATCH_PATH}}),N=j({tooltip:"是否搜集绑定VM组件的节点?",visible:function(){return this.actionType===F.SEARCH_COMPONENT}}),O=j({type:[a],readonly:!0,tooltip:"收集到绑定了VM组件相关的节点，可以自己跳转过去",visible:function(){return this.canCollectNodes&&this.actionType===F.SEARCH_COMPONENT}}),R(m=S(m=h(m=g((w=t((A=class extends l{constructor(...e){super(...e),r(this,"findList",w,this),r(this,"actionType",M,this),r(this,"allowDelete",v,this),r(this,"targetPath",L,this),r(this,"replacePath",H,this),r(this,"canCollectNodes",D,this),r(this,"collectNodes",k,this)}get findTrigger(){return!1}set findTrigger(e){this.setComponents(0)}get enableTrigger(){return!1}set enableTrigger(e){this.setComponents(1)}get disableTrigger(){return!1}set disableTrigger(e){this.setComponents(2)}get deleteTrigger(){return!1}set deleteTrigger(e){this.setComponents(3)}get replaceTrigger(){return!1}set replaceTrigger(e){this.setComponents(4)}onLoad(){if(c.editor)return;let e=this.getNodePath(this.node);console.error("you forget delete MVEditFinder,[path]",e)}setComponents(e){let t=this.findList,r="搜索到当前节点下面的组件";switch(e){case 0:r="搜索到当前节点下面的组件";break;case 1:r="激活以下节点的组件";break;case 2:r="关闭以下节点的组件";break;case 3:r="删除以下节点的组件";break;case 4:r="替换以下节点的路径"}p(r),p("______________________"),t.forEach((t=>{this.searchComponent(t,e)})),p("______________________")}searchComponent(e,t=0){this.collectNodes=[];let r=this.node.getComponentsInChildren(e);null==r||r.length<1||(p("["+e+"]:"),r.forEach((e=>{let r="";switch(t<=3&&(r=!0===e.templateMode?e.watchPathArr?":[Path:"+e.watchPathArr.join("|")+"]":"":e.watchPath?":[Path:"+e.watchPath+"]":""),p(this.getNodePath(e.node)+r),t){case 0:this.canCollectNodes&&-1===this.collectNodes.indexOf(e.node)&&this.collectNodes.push(e.node);break;case 1:e.enabled=!0;break;case 2:e.enabled=!1;break;case 3:e.node.removeComponent(e);break;case 4:let t=this.targetPath,r=this.replacePath;if(!0===e.templateMode)for(let i=0;i<e.watchPathArr.length;i++){const o=e.watchPathArr[i];e.watchPathArr[i]=this.replaceNodePath(o,t,r)}else e.watchPath=this.replaceNodePath(e.watchPath,t,r)}})))}replaceNodePath(e,t,r){let i=e.split("."),o=t.split("."),n=r.split("."),a=!0;for(let e=0;e<o.length;e++)if(i[e]!==o[e]){a=!1;break}if(!0===a){for(let e=0;e<n.length;e++)i[e]=n[e];p(" 路径更新:",e,">>>",i.join("."))}return i.join(".")}getNodePath(e){let t=e,r=[];for(;t;){let e=t.getParent();if(!e)break;r.push(t.name),t=e}return r.reverse().join("/")}}).prototype,"findList",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["VMBase","VMParent"]}}),M=t(A.prototype,"actionType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.SEARCH_COMPONENT}}),t(A.prototype,"findTrigger",[d],Object.getOwnPropertyDescriptor(A.prototype,"findTrigger"),A.prototype),t(A.prototype,"enableTrigger",[E],Object.getOwnPropertyDescriptor(A.prototype,"enableTrigger"),A.prototype),t(A.prototype,"disableTrigger",[T],Object.getOwnPropertyDescriptor(A.prototype,"disableTrigger"),A.prototype),v=t(A.prototype,"allowDelete",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(A.prototype,"deleteTrigger",[b],Object.getOwnPropertyDescriptor(A.prototype,"deleteTrigger"),A.prototype),t(A.prototype,"replaceTrigger",[P],Object.getOwnPropertyDescriptor(A.prototype,"replaceTrigger"),A.prototype),L=t(A.prototype,"targetPath",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"game"}}),H=t(A.prototype,"replacePath",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"*"}}),D=t(A.prototype,"canCollectNodes",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=t(A.prototype,"collectNodes",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=A))||m)||m)||m)||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/VMCustom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./VMEnv.ts"],(function(t){var e,o,n,r,i,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t._decorator,i=t.Toggle},function(t){s=t.VMBase},function(t){c=t.VMEnv}],execute:function(){var a,h,l,p,u,m,d,g,C,f,V,_,b,w;n._RF.push({},"ce662fwsSVPLKpmHx+KocFu","VMCustom",void 0);const{ccclass:y,property:P,executeInEditMode:M,menu:k,help:v}=r,x=[["BhvFrameIndex","index",!1],["BhvGroupToggle","index",!1],["BhvRollNumber","targetValue",!1],["cc.Label","string",!1],["cc.RichText","string",!1],["cc.EditBox","string",!0],["cc.Slider","progress",!0],["cc.ProgressBar","progress",!1],["cc.Toggle","isChecked",!0]];t("VMCustom",(a=k("OopsFramework/Mvvm/VM-Custom （自定义）"),h=v("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037634&doc_id=2873565"),l=P({tooltip:"激活controller,以开启双向绑定，否则只能接收消息"}),p=P({tooltip:"监视对象路径"}),u=P({tooltip:"绑定组件的名字"}),m=P({tooltip:"组件上需要监听的属性"}),d=P({tooltip:"刷新间隔频率(只影响脏检查的频率)",step:.01,range:[0,1],visible:function(){return!0===this.controller}}),y(g=M(g=a(g=h((f=e((C=class extends s{constructor(...t){super(...t),o(this,"controller",f,this),o(this,"watchPath",V,this),o(this,"componentName",_,this),o(this,"componentProperty",b,this),o(this,"refreshRate",w,this),this._timer=0,this._watchComponent=null,this._canWatchComponent=!1,this._oldValue=null}onLoad(){super.onLoad(),this.checkEditorComponent(),c.editor||(this._watchComponent=this.node.getComponent(this.componentName),this.checkComponentState())}onRestore(){this.checkEditorComponent()}start(){this.onValueInit()}checkEditorComponent(){if(c.editor)return;let t=x;for(let e=0;e<t.length;e++){const o=t[e];if(this.node.getComponent(o[0])){""==this.componentName&&(this.componentName=o[0]),""==this.componentProperty&&(this.componentProperty=o[1]),null!==o[2]&&(this.controller=o[2]);break}}}checkComponentState(){this._canWatchComponent=!1,this._watchComponent?this.componentProperty?this.componentProperty in this._watchComponent!=!1?this._canWatchComponent=!0:console.error("需要监听的组件的属性不存在"):console.error("未设置需要监听的组件 的属性"):console.error("未设置需要监听的组件")}getComponentValue(){return this._watchComponent[this.componentProperty]}setComponentValue(t){"cc.Toggle"==this.componentName?this.node.getComponent(i).isChecked=t:this._watchComponent[this.componentProperty]=t}onValueInit(){c.editor||this.setComponentValue(this.VM.getValue(this.watchPath))}onValueController(t,e){this.VM.setValue(this.watchPath,t)}onValueChanged(t,e,o){this.setComponentValue(t)}update(t){if(c.editor)return;if(!this.controller)return;if(!this._canWatchComponent||!1===this._watchComponent.enabled)return;if(this._timer+=t,this._timer<this.refreshRate)return;this._timer=0;let e=this._oldValue,o=this.getComponentValue();this._oldValue!==o&&(this._oldValue=this.getComponentValue(),this.onValueController(o,e))}}).prototype,"controller",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=e(C.prototype,"watchPath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=e(C.prototype,"componentName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=e(C.prototype,"componentProperty",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(C.prototype,"refreshRate",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),g=C))||g)||g)||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMEnv.ts",["cc","./env"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.EDITOR}],execute:function(){n._RF.push({},"fdf72Q91PdCXpPQ+62s1ufi","VMEnv",void 0);t("VMEnv",class{static get editor(){return e}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/VMEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(e){var t,r,i,n,a,o,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.CCString,a=e.Enum,o=e.EventHandler,c=e._decorator},function(e){l=e.VMBase}],execute:function(){var s,u,h,p,f,b,d,g,m,v,y,M,w,k,E,V,z,P;i._RF.push({},"a9ce7kf8XZJeLPlT2iWn2zD","VMEvent",void 0);const{ccclass:C,property:_,executeInEditMode:A,menu:D,help:O}=c;var x=function(e){return e[e.none=0]="none",e[e["=="]=1]="==",e[e["!="]=2]="!=",e[e[">"]=3]=">",e[e[">="]=4]=">=",e[e["<"]=5]="<",e[e["<="]=6]="<=",e}(x||{});e("default",(s=D("OopsFramework/Mvvm/VM-EventCall （调用函数）"),u=O("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037640&doc_id=2873565"),h=_({tooltip:"使用模板模式，可以使用多路径监听"}),p=_({tooltip:"监听获取值的路径",visible:function(){return!1===this.templateMode}}),f=_({tooltip:"触发一次后会自动关闭该事件"}),b=_({tooltip:"监听获取值的多条路径,这些值的改变都会通过这个函数回调,请使用 pathArr 区分获取的值 ",type:[n],visible:function(){return!0===this.templateMode}}),d=_({tooltip:"过滤模式，会根据条件过滤掉时间的触发",type:a(x)}),g=_({visible:function(){return this.filterMode!==x.none}}),m=_([o]),C(v=A(v=s(v=u((M=t((y=class extends l{constructor(...e){super(...e),r(this,"templateMode",M,this),r(this,"watchPath",w,this),r(this,"triggerOnce",k,this),r(this,"watchPathArr",E,this),r(this,"filterMode",V,this),r(this,"compareValue",z,this),r(this,"changeEvents",P,this)}onValueInit(){}onValueChanged(e,t,r){this.conditionCheck(e,this.compareValue)&&(Array.isArray(this.changeEvents)&&this.changeEvents.forEach((i=>{i.emit([e,t,r])})),!0===this.triggerOnce&&(this.enabled=!1))}conditionCheck(e,t){let r=x;switch(this.filterMode){case r.none:return!0;case r["=="]:if(e==t)return!0;break;case r["!="]:if(e!=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r[">"]:if(e>t)return!0;break;case r[">="]:if(e>=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r["<="]:if(e<=t)return!0}return!1}}).prototype,"templateMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=t(y.prototype,"watchPath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=t(y.prototype,"triggerOnce",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(y.prototype,"watchPathArr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(y.prototype,"filterMode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.none}}),z=t(y.prototype,"compareValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=t(y.prototype,"changeEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v)||v)||v)||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/VMLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMBase.ts","./VMEnv.ts"],(function(t){var e,i,r,a,l,n,s,o,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,a=t.CCString,l=t._decorator,n=t.error},function(t){s=t.StringFormatFunction},function(t){o=t.VMBase},function(t){h=t.VMEnv}],execute:function(){var c,u,p,m,g,b,d,f,V,M,L,T;r._RF.push({},"545c05XsG9GDJispEGWKvYv","VMLabel",void 0);const{ccclass:y,property:w,menu:x,executeInEditMode:F,help:v}=l,A="cc.Label";t("default",(c=x("OopsFramework/Mvvm/VM-Label （标签）"),u=v("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037641&doc_id=2873565"),p=w({tooltip:"是否启用模板代码,只能在运行时之前设置,\n将会动态解析模板语法 {{0}},并且自动设置监听的路径"}),m=w({visible(){return!1===this.templateMode}}),g=w({readonly:!0}),b=w({type:[a],visible(){return!0===this.templateMode}}),y(d=F(d=c(d=u((V=e((f=class extends o{constructor(...t){super(...t),i(this,"templateMode",V,this),i(this,"watchPath",M,this),i(this,"labelType",L,this),i(this,"watchPathArr",T,this),this.templateValueArr=[],this.templateFormatArr=[],this.originText=null}onRestore(){this.checkLabel()}onLoad(){super.onLoad(),this.checkLabel(),h.editor||this.templateMode&&(this.originText=this.getLabelValue(),this.parseTemplate())}start(){h.editor||this.onValueInit()}parseTemplate(){let t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null!=e)for(let i=0;i<e.length;i++){let r=e[i].match(t)[1].split(":")[1]||"";this.templateFormatArr[i]=r}}getReplaceText(){if(!this.originText)return"";let t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null==e)return"";let i=this.originText;for(let r=0;r<e.length;r++){const a=e[r];let l,n=a.match(t),s=parseInt(n[1]||"0")||0,o=this.templateFormatArr[r];l=this.templateValueArr[s],i=i.replace(a,this.getValueFromFormat(l,o))}return i}getValueFromFormat(t,e){return s.deal(t,e)}onValueInit(){if(!1===this.templateMode)this.setLabelValue(this.VM.getValue(this.watchPath));else{let t=this.watchPathArr.length;for(let e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e],"?");this.setLabelValue(this.getReplaceText())}}onValueChanged(t,e,i){if(!1===this.templateMode)this.setLabelValue(t);else{let e=i.join("."),r=this.watchPathArr.findIndex((t=>t===e));r>=0&&(this.templateValueArr[r]=t,this.setLabelValue(this.getReplaceText()))}}setLabelValue(t){this.getComponent(this.labelType).string=t+""}getLabelValue(){return this.getComponent(this.labelType).string}checkLabel(){let t=["cc.Label","cc.RichText","cc.EditBox"];for(let e=0;e<t.length;e++){const i=t[e];if(this.node.getComponent(i))return this.labelType=i,!0}return n("没有挂载任何label组件"),!1}}).prototype,"templateMode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=e(f.prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=e(f.prototype,"labelType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A}}),T=e(f.prototype,"watchPathArr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d)||d)||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/VMModify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(t){var e,a,i,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,l=t.Enum,s=t._decorator},function(t){u=t.VMBase}],execute:function(){var r,h,n,o,c,M,p,v,m,V,d,b,f,w;i._RF.push({},"7d2a4voaOJJGJZRWFPG6Bk7","VMModify",void 0);const{ccclass:g,property:P,menu:y,help:I}=s;var A=function(t){return t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t[t.MIN_MAX=2]="MIN_MAX",t}(A||{});t("default",(r=y("OopsFramework/Mvvm/VM-Modify （修改数据）"),h=I("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037642&doc_id=2873565"),n=P({tooltip:"监视对象路径"}),o=P({tooltip:"是不启用取值范围限制"}),c=P({type:l(A),visible:function(){return!0===this.valueClamp}}),M=P({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==A.MAX}}),p=P({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==A.MIN}}),g(v=r(v=h((V=e((m=class extends u{constructor(...t){super(...t),a(this,"watchPath",V,this),a(this,"valueClamp",d,this),a(this,"valueClampMode",b,this),a(this,"valueMin",f,this),a(this,"valueMax",w,this)}clampValue(t){let e=this.valueMin,a=this.valueMax;if(0==this.valueClamp)return t;switch(this.valueClampMode){case A.MIN_MAX:t>a&&(t=a),t<e&&(t=e);break;case A.MIN:t<e&&(t=e);break;case A.MAX:t>a&&(t=a)}return t}vAddInt(t,e){this.vAdd(t,e,!0)}vSubInt(t,e){this.vSub(t,e,!0)}vMulInt(t,e){this.vMul(t,e,!0)}vDivInt(t,e){this.vDiv(t,e,!0)}vAdd(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)+i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vSub(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)-i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vMul(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)*i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vDiv(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)/i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vString(t,e){let a=e;this.VM.setValue(this.watchPath,a)}vNumberInt(t,e){this.vNumber(t,e,!0)}vNumber(t,e,a=!1){let i=parseFloat(e);a&&(i=Math.round(i)),this.VM.setValue(this.watchPath,this.clampValue(i))}}).prototype,"watchPath",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(m.prototype,"valueClamp",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=e(m.prototype,"valueClampMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.MIN_MAX}}),f=e(m.prototype,"valueMin",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(m.prototype,"valueMax",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=m))||v)||v)||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/VMParent.ts",["cc","./GameComponent.ts","./ViewModel.ts"],(function(t){var e,n,s,o;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.GameComponent},function(t){o=t.VM}],execute:function(){var i;e._RF.push({},"15ccciO+ZRH476sPKD/LvB7","VMParent",void 0);const{ccclass:a,help:r,executionOrder:c}=n;t("default",a(i=c(-1)(i=r("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037729&doc_id=2873565")(i=class extends s{constructor(...t){super(...t),this.tag="_temp",this.data={},this.VM=o}onLoad(){if(null==this.data)return;this.tag="_temp<"+this.node.uuid.replace(".","")+">",o.add(this.data,this.tag);let t=this.getVMComponents();for(let e=0;e<t.length;e++){const n=t[e];this.replaceVMPath(n,this.tag)}this.onBind()}onBind(){}onUnBind(){}replaceVMPath(t,e){let n=t.watchPath;if(1==t.templateMode){let n=t.watchPathArr;if(n)for(let t=0;t<n.length;t++){const s=n[t];n[t]=s.replace("*",e)}}else"*"===n.split(".")[0]&&(t.watchPath=n.replace("*",e))}getVMComponents(){let t=this.node.getComponentsInChildren("VMBase"),e=this.node.getComponentsInChildren("VMParent").filter((t=>t.uuid!==this.uuid)),n=[];return e.forEach((t=>{n=n.concat(t.getComponentsInChildren("VMBase"))})),t=t.filter((t=>n.indexOf(t)<0)),t}onDestroy(){this.onUnBind(),o.remove(this.tag),this.data=null,super.onDestroy()}})||i)||i)||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMCustom.ts","./VMEnv.ts"],(function(t){var e,r,i,a,o,s,n,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.CCString,o=t._decorator},function(t){s=t.StringFormatFunction},function(t){n=t.VMCustom},function(t){l=t.VMEnv}],execute:function(){var h,u,c,p,m,V,g,d,f,w;i._RF.push({},"2a50eqI7JZNV5Sh0y/Qd9C6","VMProgress",void 0);const{ccclass:P,property:A,menu:M,help:b}=o;t("default",(h=M("OopsFramework/Mvvm/VM-Progress （进度条）"),u=b("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037843&doc_id=2873565"),c=A({visible:!1,override:!0}),p=A({type:[a],tooltip:"第一个值是min 值，第二个值 是 max 值，会计算出两者的比例"}),m=A({visible:function(){return"string"===this.componentProperty},tooltip:"字符串格式化，和 VMLabel 的字段一样，需要填入对应的格式化字符串"}),P(V=h(V=u((d=e((g=class extends n{constructor(...t){super(...t),r(this,"watchPath",d,this),r(this,"watchPathArr",f,this),this.templateMode=!0,r(this,"stringFormat",w,this)}onLoad(){(this.watchPathArr.length<2||"[min]"==this.watchPathArr[0]||"[max]"==this.watchPathArr[1])&&console.error("VMProgress must have two values!"),super.onLoad()}start(){l.editor||this.onValueInit()}onValueInit(){let t=this.watchPathArr.length;for(let e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e]);let e=this.templateValueArr[0]/this.templateValueArr[1];this.setComponentValue(e)}setComponentValue(t){if(""!==this.stringFormat){let e=s.deal(t,this.stringFormat);super.setComponentValue(e)}else super.setComponentValue(t)}onValueController(t,e){let r=Math.round(t*this.templateValueArr[1]);Number.isNaN(r)&&(r=0),this.VM.setValue(this.watchPathArr[0],r)}onValueChanged(t,e,r){if(!1===this.templateMode)return;let i=r.join("."),a=this.watchPathArr.findIndex((t=>t===i));a>=0&&(this.templateValueArr[a]=t);let o=this.templateValueArr[0]/this.templateValueArr[1];o>1&&(o=1),(o<0||Number.isNaN(o))&&(o=0),this.setComponentValue(o)}}).prototype,"watchPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=e(g.prototype,"watchPathArr",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["[min]","[max]"]}}),w=e(g.prototype,"stringFormat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=g))||V)||V)||V));i._RF.pop()}}}));

System.register("chunks:///_virtual/VMState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./ViewModel.ts"],(function(e){var t,i,n,o,a,r,l,u,c,s,h,p,N,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Enum,a=e.CCInteger,r=e.Node,l=e._decorator,u=e.Button,c=e.Sprite,s=e.UIRenderer,h=e.color,p=e.UIOpacity},function(e){N=e.VMBase},function(e){f=e.VM}],execute:function(){var C,d,b,O,m,E,v,A,y,T,_,g,D,w,M,V,I,S,k,P,L,R,B,z,U,Y,F,X,x,G,j;n._RF.push({},"47052uw/Y5O1LXaLObj4ARx","VMState",void 0);const{ccclass:H,property:q,menu:J,help:K}=l;var Q=function(e){return e[e["=="]=0]="==",e[e["!="]=1]="!=",e[e[">"]=2]=">",e[e[">="]=3]=">=",e[e["<"]=4]="<",e[e["<="]=5]="<=",e[e.range=6]="range",e}(Q||{}),W=function(e){return e[e.NODE_ACTIVE=0]="NODE_ACTIVE",e[e.NODE_VISIBLE=1]="NODE_VISIBLE",e[e.NODE_OPACITY=2]="NODE_OPACITY",e[e.NODE_COLOR=3]="NODE_COLOR",e[e.COMPONENT_CUSTOM=4]="COMPONENT_CUSTOM",e[e.SPRITE_GRAYSCALE=5]="SPRITE_GRAYSCALE",e[e.BUTTON_INTERACTABLE=6]="BUTTON_INTERACTABLE",e}(W||{}),Z=function(e){return e[e.NODE_INDEX=0]="NODE_INDEX",e[e.NODE_NAME=1]="NODE_NAME",e}(Z||{});e("default",(C=J("OopsFramework/Mvvm/VM-State （状态控制）"),d=K("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037846&doc_id=2873565"),b=q({tooltip:"遍历子节点,根据子节点的名字或名字转换为值，判断值满足条件 来激活"}),O=q({type:o(Q)}),m=q({type:o(Z),tooltip:"遍历子节点,根据子节点的名字转换为值，判断值满足条件 来激活",visible:function(){return!0===this.foreachChildMode}}),E=q({displayName:"Value: a",visible:function(){return!1===this.foreachChildMode}}),v=q({displayName:"Value: b",visible:function(){return!1===this.foreachChildMode&&this.condition===Q.range}}),A=q({type:o(W),tooltip:"一旦满足条件就对节点执行操作"}),y=q({visible:function(){return this.valueAction===W.NODE_OPACITY},range:[0,255],type:a,displayName:"Action Opacity"}),T=q({visible:function(){return this.valueAction===W.NODE_COLOR},displayName:"Action Color"}),_=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Component Name"}),g=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Component Property"}),D=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Default Value"}),w=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Action Value"}),M=q({type:[r],tooltip:"需要执行条件的节点，如果不填写则默认会执行本节点以及本节点的所有子节点 的状态"}),H(V=C(V=d((S=t((I=class extends N{constructor(...e){super(...e),i(this,"watchPath",S,this),i(this,"foreachChildMode",k,this),i(this,"condition",P,this),i(this,"foreachChildType",L,this),i(this,"valueA",R,this),i(this,"valueB",B,this),i(this,"valueAction",z,this),i(this,"valueActionOpacity",U,this),i(this,"valueActionColor",Y,this),i(this,"valueComponentName",F,this),i(this,"valueComponentProperty",X,this),i(this,"valueComponentDefaultValue",x,this),i(this,"valueComponentActionValue",G,this),i(this,"watchNodes",j,this)}onLoad(){super.onLoad(),0==this.watchNodes.length&&(this.valueAction!==W.NODE_ACTIVE&&!1===this.foreachChildMode&&this.watchNodes.push(this.node),this.watchNodes=this.watchNodes.concat(this.node.children))}start(){this.enabled&&this.onValueInit()}onValueInit(){let e=f.getValue(this.watchPath);this.checkNodeFromValue(e)}onValueChanged(e,t,i){this.checkNodeFromValue(e)}checkNodeFromValue(e){if(this.foreachChildMode)this.watchNodes.forEach(((t,i)=>{let n=this.foreachChildType===Z.NODE_INDEX?i:t.name,o=this.conditionCheck(e,n);this.setNodeState(t,o)}));else{let t=this.conditionCheck(e,this.valueA,this.valueB);this.setNodesStates(t)}}setNodesStates(e){let t=this.watchNodes,i=e;t.forEach((e=>{this.setNodeState(e,i)}))}setNodeState(e,t){let i=t;switch(this.valueAction){case W.NODE_ACTIVE:e.active=!!i;break;case W.NODE_VISIBLE:{let t=e.getComponent(p);null==t&&(t=e.addComponent(p)),t&&(t.opacity=i?255:0);break}case W.NODE_OPACITY:{let t=e.getComponent(p);null==t&&(t=e.addComponent(p)),t&&(t.opacity=i?this.valueActionOpacity:255);break}case W.NODE_COLOR:{let t=e.getComponent(s);t&&(t.color=i?this.valueActionColor:h(255,255,255));break}case W.COMPONENT_CUSTOM:let t=e.getComponent(this.valueComponentName);if(null==t)return;this.valueComponentProperty in t&&(t[this.valueComponentProperty]=i?this.valueComponentActionValue:this.valueComponentDefaultValue);break;case W.SPRITE_GRAYSCALE:{let t=e.getComponent(c);t&&(t.grayscale=i);break}case W.BUTTON_INTERACTABLE:{let t=e.getComponent(u);t&&(t.interactable=i);break}}}conditionCheck(e,t,i){let n=Q;switch(this.condition){case n["=="]:if(e==t)return!0;break;case n["!="]:if(e!=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n[">"]:if(e>t)return!0;break;case n[">="]:if(e>=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n["<="]:if(e<=t)return!0;break;case n.range:if(e>=t&&e<=i)return!0}return!1}}).prototype,"watchPath",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=t(I.prototype,"foreachChildMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=t(I.prototype,"condition",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q["=="]}}),L=t(I.prototype,"foreachChildType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.NODE_INDEX}}),R=t(I.prototype,"valueA",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=t(I.prototype,"valueB",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(I.prototype,"valueAction",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.NODE_ACTIVE}}),U=t(I.prototype,"valueActionOpacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=t(I.prototype,"valueActionColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(155,155,155)}}),F=t(I.prototype,"valueComponentName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=t(I.prototype,"valueComponentProperty",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=t(I.prototype,"valueComponentDefaultValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=t(I.prototype,"valueComponentActionValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=t(I.prototype,"watchNodes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=I))||V)||V)||V));n._RF.pop()}}}));

System.register("chunks:///_virtual/WsFunc.ts",["cc","./Oops.ts"],(function(s){var c,t;return{setters:[function(s){c=s.cclegacy},function(s){t=s.oops}],execute:function(){c._RF.push({},"5139cs22hZLE6/MO/KWc7ZO","WsFunc",void 0);class e{static doWithFunc(s){let c=s.msgType,n=s.msgData;switch(t.log.logNet("socket通知消息",s),c){case"msgUserOffline":e.msgUserOffline(n)}}static msgUserOffline(s){}}s("WsFunc",e),c._RF.pop()}}}));

System.register("chunks:///_virtual/WsNet.ts",["cc","./Oops.ts","./WsFunc.ts"],(function(t){var e,s,o,i;return{setters:[function(t){e=t.cclegacy,s=t.game},function(t){o=t.oops},function(t){i=t.WsFunc}],execute:function(){e._RF.push({},"19dc0RNLj1Ku6Y32vfJmg50","WsNet",void 0);var n=n||window.WebSocket;t("WsNet",class{constructor(){this.sock=null,this.isConnected=!1,this.lockReconnect=!1,this.initFlag=!0,this.wsUrl=null,this.timeout=1e4,this.respTimeout=3e4,this.timeoutObj=null,this.serverTimeoutObj=null,this.reConnectTimeoutObj=null,this.reConnectTryNum=0,this.maxReconnectTimes=10}_on_opened(t){console.log("ws connect server success"),this.initFlag||o.log.logNet("重连成功！"),this.reConnectTryNum=0,this.isConnected=!0,this.initFlag=!1,this.clearAllTimeout(),this.heartCheckAllStart(),o.message.dispatchEvent("SOCKET_CONNECT_SUCCESS",t)}_on_recv_data(t){var e=t.data;if(null!=e&&0!=e.length){if(this.heartRespCheckReset(),this.heartRespCheckStart(),"true"!=e){o.log.logNet(e);var s=(e=JSON.parse(e)).msgType;null!=s&&0!=s.length?this.doWithFunc(e):o.log.logNet("消息类型不存在")}}else console.log("消息为空，不处理")}_on_socket_close(t){this.sock&&(this.close(),console.log("ws connect server close -------------")),this.initFlag||this.reConnect()}_on_socket_err(t){this.sock&&(this.close(),console.log("ws connect server "+t)),this.reConnect()}connect(t){this.wsUrl=t,o.log.logNet("websockt连接:"+this.wsUrl),this.sock=new n(this.wsUrl),this.sock.onopen=this._on_opened.bind(this),this.sock.onmessage=this._on_recv_data.bind(this),this.sock.onclose=this._on_socket_close.bind(this),this.sock.onerror=this._on_socket_err.bind(this)}reConnect(t=""){var e=this;if(o.log.logNet("ws reConnect 断线重连"+e.lockReconnect),!e.lockReconnect){if(e.reConnectTryNum>e.maxReconnectTimes)return o.log.logNet("ws reconnect fail"),o.gui.toast("网络连接失败，请检查网络后重新登录"),void setTimeout((()=>{s.restart()}),1500);e.lockReconnect=!0,e.reConnectTryNum+=1,e.reConnectTimeoutObj&&clearTimeout(e.reConnectTimeoutObj),e.reConnectTimeoutObj=setTimeout((function(){o.log.logNet("ws reconnect server..."),e.connect(e.wsUrl),e.lockReconnect=!1}),2e3)}}send(t){this.sock&&this.isConnected&&this.sock.send(t)}close(t=!1){o.log.logNet("关闭ws链路"),t&&(this.clearAllTimeout(),null!==this.sock&&(this.sock.onclose=function(){},this.sock.onopen=function(){},this.sock.onerror=function(){},this.sock.onmessage=function(){}),this.initFlag=!0,this.lockReconnect=!1,this.wsUrl=null,this.timeoutObj=null,this.serverTimeoutObj=null,this.reConnectTimeoutObj=null,this.reConnectTryNum=0),this.isConnected=!1,null!==this.sock&&(this.sock.close(),this.sock=null)}initWs(){this.reConnectTryNum=0,this.initFlag=!0,this.clearAllTimeout(),this.close()}heartCheckAllStart(){this.heartCheckStart(),this.heartRespCheckStart()}heartCheckStart(){this.timeoutObj=setInterval((function(){this.send("ping")}),this.timeout)}heartRespCheckStart(){this.serverTimeoutObj=setTimeout((function(){this.reConnect()}),this.respTimeout)}heartCheckReset(){return clearTimeout(this.timeoutObj),this}heartRespCheckReset(){return clearTimeout(this.serverTimeoutObj),this}clearAllTimeout(){return clearTimeout(this.reConnectTimeoutObj),this.heartCheckReset(),this.heartRespCheckReset(),this}doWithFunc(t){switch(t.msgType){case"msgUserOffline":this.clearWs(t.msgData)}i.doWithFunc(t)}clearWs(t){t.userId==o.storage.getUser()?this.initWs():o.log.logNet("非法用户报文，丢弃")}isClose(){return!this.isConnected}}),e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});